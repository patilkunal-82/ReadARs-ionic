(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{W9vR:function(n,e,l){"use strict";l.r(e);var o=l("CcnG"),t=function(){return function(){}}(),r=l("oBZk"),i=l("ZZ/e"),u=l("gIcY"),a=l("Ip0R"),c=l("mrSG"),s=l("azqb"),b=l("d5rD"),d=l("lGQG"),g=l("Pn9U"),h=l("Yttj"),p=l("a3Cf"),f=function(n){function e(){var e=null!==n&&n.apply(this,arguments)||this;return e.cordovaFileError={1:"NOT_FOUND_ERR",2:"SECURITY_ERR",3:"ABORT_ERR",4:"NOT_READABLE_ERR",5:"ENCODING_ERR",6:"NO_MODIFICATION_ALLOWED_ERR",7:"INVALID_STATE_ERR",8:"SYNTAX_ERR",9:"INVALID_MODIFICATION_ERR",10:"QUOTA_EXCEEDED_ERR",11:"TYPE_MISMATCH_ERR",12:"PATH_EXISTS_ERR",13:"WRONG_ENTRY_TYPE",14:"DIR_READ_ERR"},e}return Object(c.d)(e,n),e.prototype.getFreeDiskSpace=function(){var n=this;return function(){if(!0===Object(p.checkAvailability)(n))return Object(p.getPromise)(function(n,e){cordova.exec(n,e,"File","getFreeDiskSpace",[])})}()},e.prototype.checkDir=function(n,e){var l=this;return function(){if(!0===Object(p.checkAvailability)(l)){if(/^\//.test(e)){var o=new FileError(5);return o.message="directory cannot start with /",Promise.reject(o)}return l.resolveDirectoryUrl(n+e).then(function(){return!0})}}()},e.prototype.createDir=function(n,e,l){var o=this;return function(){if(!0===Object(p.checkAvailability)(o)){if(/^\//.test(e)){var t=new FileError(5);return t.message="directory cannot start with /",Promise.reject(t)}var r={create:!0};return l||(r.exclusive=!0),o.resolveDirectoryUrl(n).then(function(n){return o.getDirectory(n,e,r)})}}()},e.prototype.removeDir=function(n,e){var l=this;return function(){if(!0===Object(p.checkAvailability)(l)){if(/^\//.test(e)){var o=new FileError(5);return o.message="directory cannot start with /",Promise.reject(o)}return l.resolveDirectoryUrl(n).then(function(n){return l.getDirectory(n,e,{create:!1})}).then(function(n){return l.remove(n)})}}()},e.prototype.moveDir=function(n,e,l,o){var t=this;return function(){if(!0===Object(p.checkAvailability)(t)){if(/^\//.test(o=o||e)){var r=new FileError(5);return r.message="directory cannot start with /",Promise.reject(r)}return t.resolveDirectoryUrl(n).then(function(n){return t.getDirectory(n,e,{create:!1})}).then(function(n){return t.resolveDirectoryUrl(l).then(function(e){return t.move(n,e,o)})})}}()},e.prototype.copyDir=function(n,e,l,o){var t=this;return function(){if(!0===Object(p.checkAvailability)(t)){if(/^\//.test(o)){var r=new FileError(5);return r.message="directory cannot start with /",Promise.reject(r)}return t.resolveDirectoryUrl(n).then(function(n){return t.getDirectory(n,e,{create:!1})}).then(function(n){return t.resolveDirectoryUrl(l).then(function(e){return t.copy(n,e,o)})})}}()},e.prototype.listDir=function(n,e){var l=this;return function(){if(!0===Object(p.checkAvailability)(l)){if(/^\//.test(e)){var o=new FileError(5);return o.message="directory cannot start with /",Promise.reject(o)}return l.resolveDirectoryUrl(n).then(function(n){return l.getDirectory(n,e,{create:!1,exclusive:!1})}).then(function(n){var e=n.createReader();return l.readEntries(e)})}}()},e.prototype.removeRecursively=function(n,e){var l=this;return function(){if(!0===Object(p.checkAvailability)(l)){if(/^\//.test(e)){var o=new FileError(5);return o.message="directory cannot start with /",Promise.reject(o)}return l.resolveDirectoryUrl(n).then(function(n){return l.getDirectory(n,e,{create:!1})}).then(function(n){return l.rimraf(n)})}}()},e.prototype.checkFile=function(n,e){var l=this;return function(){if(!0===Object(p.checkAvailability)(l)){if(/^\//.test(e)){var o=new FileError(5);return o.message="file cannot start with /",Promise.reject(o)}return l.resolveLocalFilesystemUrl(n+e).then(function(n){if(n.isFile)return!0;var e=new FileError(13);return e.message="input is not a file",Promise.reject(e)})}}()},e.prototype.createFile=function(n,e,l){var o=this;return function(){if(!0===Object(p.checkAvailability)(o)){if(/^\//.test(e)){var t=new FileError(5);return t.message="file-name cannot start with /",Promise.reject(t)}var r={create:!0};return l||(r.exclusive=!0),o.resolveDirectoryUrl(n).then(function(n){return o.getFile(n,e,r)})}}()},e.prototype.removeFile=function(n,e){var l=this;return function(){if(!0===Object(p.checkAvailability)(l)){if(/^\//.test(e)){var o=new FileError(5);return o.message="file-name cannot start with /",Promise.reject(o)}return l.resolveDirectoryUrl(n).then(function(n){return l.getFile(n,e,{create:!1})}).then(function(n){return l.remove(n)})}}()},e.prototype.writeFile=function(n,e,l,o){var t=this;return void 0===o&&(o={}),function(){if(!0===Object(p.checkAvailability)(t)){if(/^\//.test(e)){var r=new FileError(5);return r.message="file-name cannot start with /",Promise.reject(r)}var i={create:!o.append,exclusive:!o.replace};return t.resolveDirectoryUrl(n).then(function(n){return t.getFile(n,e,i)}).then(function(n){return t.writeFileEntry(n,l,o)})}}()},e.prototype.writeFileEntry=function(n,e,l){var o=this;return this.createWriter(n).then(function(n){return l.append&&n.seek(n.length),l.truncate&&n.truncate(l.truncate),o.write(n,e)}).then(function(){return n})},e.prototype.writeExistingFile=function(n,e,l){var o=this;return function(){if(!0===Object(p.checkAvailability)(o))return o.writeFile(n,e,l,{replace:!0})}()},e.prototype.readAsText=function(n,e){var l=this;return function(){if(!0===Object(p.checkAvailability)(l))return l.readFile(n,e,"Text")}()},e.prototype.readAsDataURL=function(n,e){var l=this;return function(){if(!0===Object(p.checkAvailability)(l))return l.readFile(n,e,"DataURL")}()},e.prototype.readAsBinaryString=function(n,e){var l=this;return function(){if(!0===Object(p.checkAvailability)(l))return l.readFile(n,e,"BinaryString")}()},e.prototype.readAsArrayBuffer=function(n,e){var l=this;return function(){if(!0===Object(p.checkAvailability)(l))return l.readFile(n,e,"ArrayBuffer")}()},e.prototype.moveFile=function(n,e,l,o){var t=this;return function(){if(!0===Object(p.checkAvailability)(t)){if(/^\//.test(o=o||e)){var r=new FileError(5);return r.message="file name cannot start with /",Promise.reject(r)}return t.resolveDirectoryUrl(n).then(function(n){return t.getFile(n,e,{create:!1})}).then(function(n){return t.resolveDirectoryUrl(l).then(function(e){return t.move(n,e,o)})})}}()},e.prototype.copyFile=function(n,e,l,o){var t=this;return function(){if(!0===Object(p.checkAvailability)(t)){if(/^\//.test(o=o||e)){var r=new FileError(5);return r.message="file name cannot start with /",Promise.reject(r)}return t.resolveDirectoryUrl(n).then(function(n){return t.getFile(n,e,{create:!1})}).then(function(n){return t.resolveDirectoryUrl(l).then(function(e){return t.copy(n,e,o)})})}}()},e.prototype.fillErrorMessage=function(n){try{n.message=this.cordovaFileError[n.code]}catch(e){}},e.prototype.resolveLocalFilesystemUrl=function(n){var e=this;return function(){if(!0===Object(p.checkAvailability)(e))return Object(p.getPromise)(function(l,o){try{window.resolveLocalFileSystemURL(n,function(n){l(n)},function(n){e.fillErrorMessage(n),o(n)})}catch(t){e.fillErrorMessage(t),o(t)}})}()},e.prototype.resolveDirectoryUrl=function(n){var e=this;return function(){if(!0===Object(p.checkAvailability)(e))return e.resolveLocalFilesystemUrl(n).then(function(n){if(n.isDirectory)return n;var e=new FileError(13);return e.message="input is not a directory",Promise.reject(e)})}()},e.prototype.getDirectory=function(n,e,l){var o=this;return function(){if(!0===Object(p.checkAvailability)(o))return new Promise(function(t,r){try{n.getDirectory(e,l,function(n){t(n)},function(n){o.fillErrorMessage(n),r(n)})}catch(i){o.fillErrorMessage(i),r(i)}})}()},e.prototype.getFile=function(n,e,l){var o=this;return function(){if(!0===Object(p.checkAvailability)(o))return new Promise(function(t,r){try{n.getFile(e,l,t,function(n){o.fillErrorMessage(n),r(n)})}catch(i){o.fillErrorMessage(i),r(i)}})}()},e.prototype.readFile=function(n,e,l){var o=this;if(/^\//.test(e)){var t=new FileError(5);return t.message="file-name cannot start with /",Promise.reject(t)}return this.resolveDirectoryUrl(n).then(function(n){return o.getFile(n,e,{create:!1})}).then(function(n){var e=new FileReader;return Object(p.getPromise)(function(o,t){e.onloadend=function(){void 0!==e.result||null!==e.result?o(e.result):t(void 0!==e.error||null!==e.error?e.error:{code:null,message:"READER_ONLOADEND_ERR"})},n.file(function(n){e["readAs"+l].call(e,n)},function(n){t(n)})})})},e.prototype.remove=function(n){var e=this;return new Promise(function(l,o){n.remove(function(){l({success:!0,fileRemoved:n})},function(n){e.fillErrorMessage(n),o(n)})})},e.prototype.move=function(n,e,l){var o=this;return new Promise(function(t,r){n.moveTo(e,l,function(n){t(n)},function(n){o.fillErrorMessage(n),r(n)})})},e.prototype.copy=function(n,e,l){var o=this;return new Promise(function(t,r){n.copyTo(e,l,function(n){t(n)},function(n){o.fillErrorMessage(n),r(n)})})},e.prototype.readEntries=function(n){var e=this;return new Promise(function(l,o){n.readEntries(function(n){l(n)},function(n){e.fillErrorMessage(n),o(n)})})},e.prototype.rimraf=function(n){var e=this;return new Promise(function(l,o){n.removeRecursively(function(){l({success:!0,fileRemoved:n})},function(n){e.fillErrorMessage(n),o(n)})})},e.prototype.createWriter=function(n){var e=this;return new Promise(function(l,o){n.createWriter(function(n){l(n)},function(n){e.fillErrorMessage(n),o(n)})})},e.prototype.write=function(n,e){return e instanceof Blob?this.writeFileInChunks(n,e):new Promise(function(l,o){n.onwriteend=function(e){n.error?o(n.error):l(e)},n.write(e)})},e.prototype.writeFileInChunks=function(n,e){var l=1048576,o=0;function t(){var t=Math.min(l,e.size-o),r=e.slice(o,o+t);o+=t,n.write(r)}return Object(p.getPromise)(function(l,r){n.onerror=r,n.onwrite=function(){o<e.size?t():l()},t()})},Object.defineProperty(e.prototype,"applicationDirectory",{get:function(){return Object(p.cordovaPropertyGet)(this,"applicationDirectory")},set:function(n){Object(p.cordovaPropertySet)(this,"applicationDirectory",n)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"applicationStorageDirectory",{get:function(){return Object(p.cordovaPropertyGet)(this,"applicationStorageDirectory")},set:function(n){Object(p.cordovaPropertySet)(this,"applicationStorageDirectory",n)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dataDirectory",{get:function(){return Object(p.cordovaPropertyGet)(this,"dataDirectory")},set:function(n){Object(p.cordovaPropertySet)(this,"dataDirectory",n)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cacheDirectory",{get:function(){return Object(p.cordovaPropertyGet)(this,"cacheDirectory")},set:function(n){Object(p.cordovaPropertySet)(this,"cacheDirectory",n)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"externalApplicationStorageDirectory",{get:function(){return Object(p.cordovaPropertyGet)(this,"externalApplicationStorageDirectory")},set:function(n){Object(p.cordovaPropertySet)(this,"externalApplicationStorageDirectory",n)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"externalDataDirectory",{get:function(){return Object(p.cordovaPropertyGet)(this,"externalDataDirectory")},set:function(n){Object(p.cordovaPropertySet)(this,"externalDataDirectory",n)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"externalCacheDirectory",{get:function(){return Object(p.cordovaPropertyGet)(this,"externalCacheDirectory")},set:function(n){Object(p.cordovaPropertySet)(this,"externalCacheDirectory",n)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"externalRootDirectory",{get:function(){return Object(p.cordovaPropertyGet)(this,"externalRootDirectory")},set:function(n){Object(p.cordovaPropertySet)(this,"externalRootDirectory",n)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tempDirectory",{get:function(){return Object(p.cordovaPropertyGet)(this,"tempDirectory")},set:function(n){Object(p.cordovaPropertySet)(this,"tempDirectory",n)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"syncedDataDirectory",{get:function(){return Object(p.cordovaPropertyGet)(this,"syncedDataDirectory")},set:function(n){Object(p.cordovaPropertySet)(this,"syncedDataDirectory",n)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"documentsDirectory",{get:function(){return Object(p.cordovaPropertyGet)(this,"documentsDirectory")},set:function(n){Object(p.cordovaPropertySet)(this,"documentsDirectory",n)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sharedDirectory",{get:function(){return Object(p.cordovaPropertyGet)(this,"sharedDirectory")},set:function(n){Object(p.cordovaPropertySet)(this,"sharedDirectory",n)},enumerable:!1,configurable:!0}),e.pluginName="File",e.plugin="cordova-plugin-file",e.pluginRef="cordova.file",e.repo="https://github.com/apache/cordova-plugin-file",e.platforms=["Android","Browser","iOS","macOS","Windows"],e}(p.IonicNativePlugin),m=l("iWj2"),y=function(){function n(n,e,l,o,t,r,i,u,a,c,b){this._modalController=n,this._alertController=e,this.booksService=l,this.fb=o,this._camera=t,this._webview=r,this.file=i,this.plt=u,this.filePath=a,this.authService=c,this.webview=b,this.dataReader=new FileReader,this.images=[],this.booklanguage=s.c,this.bookgenre=s.b,this.submitted=null,this.showForm=!0,this.panelOpenState=!1,this.username=void 0,this.formErrors={bookname:"",booklanguage:"",bookgenre:"",bookowneraddress:"",bookownertelnum:"",bookrating:"",bookauthor:""},this.validationMessages={bookname:{required:"Book Name is required.",minlength:"Book Name must be at least 1 character long.",maxlength:"BookName cannot be more than 40 characters long."},booklanguage:{required:"Book Language is required.",minlength:"Book Language must be at least 2 characters long.",maxlength:"Book Language cannot be more than 25 characters long."},bookgenre:{required:"Book Language is required.",minlength:"Book Language must be at least 2 characters long.",maxlength:"Book Language cannot be more than 25 characters long."},bookowneraddress:{required:"Address is required."},bookownertelnum:{required:"Contact number is required.",pattern:"Contact number must contain only numbers."},booauthor:{required:"Author Name is required.",minlength:"Author Name must be at least 1 character long.",maxlength:"Author Name cannot be more than 40 characters long."}}}return n.prototype.ngOnInit=function(){var n=this;this.createForm(),this.authService.loadUserCredentials(),this.subscription=this.authService.getUsername().subscribe(function(e){console.log(e),n.username=e}),this.booksService.getBooks().subscribe(function(e){n.books=e},function(e){return n.errMess=e}),document.querySelector("ion-button").addEventListener("click",this.onSubmit)},n.prototype.onFileChanged=function(n){console.log(n),this.selectedFile=n.target.files[0],console.log("Event",n),console.log("Event target files",n.target.files),console.log("selected file contnets",this.selectedFile),console.log("selected file name",this.selectedFile.name),this.uploadData=new FormData,this.uploadData.append("imageFile",this.selectedFile,this.selectedFile.name),this.dataReader.readAsArrayBuffer(n.target.files[0])},n.prototype.createForm=function(){var n=this;this.addBookFormGroup=this.fb.group({bookname:["",[u.m.required,u.m.minLength(1),u.m.maxLength(40)]],booklanguage:["",[u.m.required,u.m.minLength(2),u.m.maxLength(25)]],bookgenre:["",[u.m.required,u.m.minLength(2),u.m.maxLength(25)]],bookowneraddress:["",[u.m.required]],bookownertelnum:["",[u.m.required,u.m.pattern]],bookrating:"5",bookauthor:["",[u.m.required,u.m.minLength(1),u.m.maxLength(200)]],bookcoverimage:""}),this.addBookFormGroup.valueChanges.subscribe(function(e){return n.onValueChanged(e)})},n.prototype.onValueChanged=function(n){if(this.addBookFormGroup){var e=this.addBookFormGroup;for(var l in this.formErrors)if(this.formErrors.hasOwnProperty(l)){this.formErrors[l]="";var o=e.get(l);if(o&&o.dirty&&!o.valid){var t=this.validationMessages[l];for(var r in o.errors)o.errors.hasOwnProperty(r)&&(this.formErrors[l]+=t[r]+" ")}}}},n.prototype.onSubmit=function(){return c.b(this,void 0,void 0,function(){var n=this;return c.e(this,function(e){switch(e.label){case 0:return[4,this._alertController.create({header:"Add Book",message:"Select your option..",buttons:[{text:"Add this",handler:function(){n.addbook=n.addBookFormGroup.value,n.addbook.bookcurrentstatus="available",console.log(n.addbook),n.showForm=!1,n.booksService.addBook(n.addbook).subscribe(function(e){console.log("response received-BOOK ADDED"),n.submitted=e,n.booksService.uploadImage(n.submitted._id,n.uploadData).subscribe(function(e){console.log(e),n.receivedImageData=e,n.base64Data=n.receivedImageData.pic,n.convertedImage="data:image/jpeg;base64,"+n.base64Data}),n.addbook=null,setTimeout(function(){n.submitted=null,n.showForm=!0},5e3)},function(n){return console.log(n.status,n.message)}),n.addBookFormGroup.reset({bookname:"",booklanguage:"",bookgenre:"",bookowneraddress:"",bookownertelnum:"",bookrating:"5",bookcoverimage:""}),n.capturedImage=void 0,n.addbookDetailsFormDirective.resetForm(),n.closeModal()}},{text:"Add this & 1 more",handler:function(){n.addbook=n.addBookFormGroup.value,n.addbook.bookcurrentstatus="available",console.log(n.addbook),n.showForm=!1,n.booksService.addBook(n.addbook).subscribe(function(e){console.log("response received"),n.submitted=e,console.log(n.submitted),n.booksService.uploadImage(n.submitted._id,n.uploadData).subscribe(function(e){console.log(e),n.receivedImageData=e,n.base64Data=n.receivedImageData.pic,n.convertedImage="data:image/jpeg;base64,"+n.base64Data}),n.addbook=null,setTimeout(function(){n.submitted=null,n.showForm=!0},5e3)},function(n){return console.log(n.status,n.message)}),n.addBookFormGroup.reset({bookname:"",booklanguage:"",bookgenre:"",bookowneraddress:"",bookownertelnum:"",bookrating:"5",bookcoverimage:""}),n.capturedImage=void 0,n.addbookDetailsFormDirective.resetForm()}}]})];case 1:return[4,e.sent().present()];case 2:return e.sent(),[2]}})})},n.prototype.selectImageSource=function(){return c.b(this,void 0,void 0,function(){var n,e,l=this;return c.e(this,function(o){switch(o.label){case 0:return n={quality:100,destinationType:this._camera.DestinationType.FILE_URI,encodingType:this._camera.EncodingType.PNG,mediaType:this._camera.MediaType.PICTURE,targetHeight:180,targetWidth:100,correctOrientation:!0,sourceType:this._camera.PictureSourceType.CAMERA},e={quality:100,destinationType:this._camera.DestinationType.FILE_URI,encodingType:this._camera.EncodingType.PNG,mediaType:this._camera.MediaType.PICTURE,targetHeight:180,targetWidth:100,correctOrientation:!0,sourceType:this._camera.PictureSourceType.SAVEDPHOTOALBUM},[4,this._alertController.create({header:"Select Source",message:"Pick a source for your image",buttons:[{text:"Camera",handler:function(){l._camera.getPicture(n).then(function(n){console.log(n);var e=n.substring(n.lastIndexOf("/")+1),o=n.substring(0,n.lastIndexOf("/")+1);console.log("image name",e),console.log("image path",o),console.log("before read as data url"),l.file.readAsDataURL(o,e).then(function(n){return l.capturedImage=n}),console.log("after read as data url"),l.file.resolveLocalFilesystemUrl(n).then(function(n){console.log("inside resolve local file system url"),n.file(function(n){return l.readFile(n)})}).catch(function(n){console.log("error reading file")})},function(n){console.log(n)})}},{text:"Gallery",handler:function(){l._camera.getPicture(e).then(function(n){var e=n.substring(n.lastIndexOf("/")+1),o=n.substring(0,n.lastIndexOf("/")+1);l.file.readAsDataURL(o,e).then(function(n){return l.capturedImage=n}),l.file.resolveLocalFilesystemUrl(n).then(function(n){console.log("inside resolve local file system url"),n.file(function(n){return l.readFile(n)})}).catch(function(n){console.log("error reading file")})},function(n){console.log(n)})}}]})];case 1:return[4,o.sent().present()];case 2:return o.sent(),[2]}})})},n.prototype.readFile=function(n){var e=this,l=new FileReader;console.log("file type",n.type),console.log("file type",n.name),l.onloadend=function(){if(e.uploadData=new FormData,l.result){var o=new Blob([l.result],{type:n.type});e.uploadData.append("imageFile",o,n.name)}},l.readAsArrayBuffer(n)},n.prototype.closeModal=function(){console.log("inside close modal"),this._modalController.dismiss()},n}(),k=o.nb({encapsulation:0,styles:[[".book-img[_ngcontent-%COMP%]{width:50px;height:50px;border:1px solid gray;margin:5px auto}.displaycard[_ngcontent-%COMP%]{margin:5px;padding:5px}ion-button[_ngcontent-%COMP%]{--background:#F4F6F7}"]],data:{}});function v(n){return o.Ib(0,[(n()(),o.pb(0,0,null,null,1,"ion-icon",[["src","../assets/icon/camera-outline.svg"]],null,[[null,"click"]],function(n,e,l){var o=!0;return"click"===e&&(o=!1!==n.component.selectImageSource()&&o),o},r.lb,r.q)),o.ob(1,49152,null,0,i.B,[o.h,o.k],{src:[0,"src"]},null)],function(n,e){n(e,1,0,"../assets/icon/camera-outline.svg")},null)}function C(n){return o.Ib(0,[(n()(),o.pb(0,0,null,null,4,"ion-img",[["formControlName","bookcoverimage"],["height","100"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,r.mb,r.r)),o.ob(1,671744,null,0,u.d,[[3,u.a],[8,null],[8,null],[8,null],[2,u.q]],{name:[0,"name"]},null),o.Db(2048,null,u.h,null,[u.d]),o.ob(3,16384,null,0,u.i,[[4,u.h]],null,null),o.ob(4,49152,null,0,i.C,[o.h,o.k],{src:[0,"src"]},null)],function(n,e){var l=e.component;n(e,1,0,"bookcoverimage"),n(e,4,0,l.capturedImage)},function(n,e){n(e,0,0,o.yb(e,3).ngClassUntouched,o.yb(e,3).ngClassTouched,o.yb(e,3).ngClassPristine,o.yb(e,3).ngClassDirty,o.yb(e,3).ngClassValid,o.yb(e,3).ngClassInvalid,o.yb(e,3).ngClassPending)})}function D(n){return o.Ib(0,[(n()(),o.pb(0,0,null,null,2,"ion-select-option",[],null,null,null,r.Db,r.J)),o.ob(1,49152,null,0,i.mb,[o.h,o.k],{value:[0,"value"]},null),(n()(),o.Gb(2,0,[" "," "]))],function(n,e){n(e,1,0,e.context.$implicit)},function(n,e){n(e,2,0,e.context.$implicit)})}function I(n){return o.Ib(0,[(n()(),o.pb(0,0,null,null,2,"ion-select-option",[],null,null,null,r.Db,r.J)),o.ob(1,49152,null,0,i.mb,[o.h,o.k],{value:[0,"value"]},null),(n()(),o.Gb(2,0,[" "," "]))],function(n,e){n(e,1,0,e.context.$implicit)},function(n,e){n(e,2,0,e.context.$implicit)})}function O(n){return o.Ib(0,[o.Eb(402653184,1,{addbookDetailsFormDirective:0}),(n()(),o.pb(1,0,null,null,6,"ion-header",[["collapse","condense"],["color","success"]],null,null,null,r.kb,r.p)),o.ob(2,49152,null,0,i.A,[o.h,o.k],{translucent:[0,"translucent"]},null),(n()(),o.pb(3,0,null,0,4,"ion-toolbar",[],null,null,null,r.Pb,r.U)),o.ob(4,49152,null,0,i.Ab,[o.h,o.k],null,null),(n()(),o.pb(5,0,null,0,2,"ion-title",[["size","large"],["style","font:xx-large; font-family: 'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif;\n               color: #1B4F72 ; font-weight: bolder;"]],null,null,null,r.Ob,r.T)),o.ob(6,49152,null,0,i.yb,[o.h,o.k],null,null),(n()(),o.Gb(-1,0,[" Add 1 or more books "])),(n()(),o.pb(8,0,null,null,118,"ion-content",[],null,null,null,r.gb,r.l)),o.ob(9,49152,null,0,i.t,[o.h,o.k],null,null),(n()(),o.pb(10,0,null,0,116,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(n,e,l){var t=!0;return"submit"===e&&(t=!1!==o.yb(n,12).onSubmit(l)&&t),"reset"===e&&(t=!1!==o.yb(n,12).onReset()&&t),t},null,null)),o.ob(11,16384,null,0,u.o,[],null,null),o.ob(12,540672,[[1,4],["fform",4]],0,u.e,[[8,null],[8,null]],{form:[0,"form"]},null),o.Db(2048,null,u.a,null,[u.e]),o.ob(14,16384,null,0,u.j,[[4,u.a]],null,null),(n()(),o.pb(15,0,null,null,11,"ion-item",[],null,null,null,r.sb,r.u)),o.ob(16,49152,null,0,i.G,[o.h,o.k],null,null),(n()(),o.pb(17,0,null,0,2,"ion-label",[["color","medium"]],null,null,null,r.tb,r.y)),o.ob(18,49152,null,0,i.M,[o.h,o.k],{color:[0,"color"]},null),(n()(),o.Gb(-1,0,["Book Name:"])),(n()(),o.pb(20,0,null,0,6,"ion-input",[["formControlName","bookname"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ionBlur"],[null,"ionChange"]],function(n,e,l){var t=!0;return"ionBlur"===e&&(t=!1!==o.yb(n,21)._handleBlurEvent()&&t),"ionChange"===e&&(t=!1!==o.yb(n,21)._handleInputEvent(l.target.value)&&t),t},r.ob,r.t)),o.ob(21,16384,null,0,i.Nb,[o.k],null,null),o.Db(1024,null,u.g,function(n){return[n]},[i.Nb]),o.ob(23,671744,null,0,u.d,[[3,u.a],[8,null],[8,null],[6,u.g],[2,u.q]],{name:[0,"name"]},null),o.Db(2048,null,u.h,null,[u.d]),o.ob(25,16384,null,0,u.i,[[4,u.h]],null,null),o.ob(26,49152,null,0,i.F,[o.h,o.k],{type:[0,"type"]},null),(n()(),o.pb(27,0,null,null,11,"ion-item",[],null,null,null,r.sb,r.u)),o.ob(28,49152,null,0,i.G,[o.h,o.k],null,null),(n()(),o.pb(29,0,null,0,5,"ion-label",[["color","medium"]],null,null,null,r.tb,r.y)),o.ob(30,49152,null,0,i.M,[o.h,o.k],{color:[0,"color"]},null),(n()(),o.Gb(-1,0,["Book Cover "])),(n()(),o.gb(16777216,null,0,1,null,v)),o.ob(33,16384,null,0,a.j,[o.O,o.L],{ngIf:[0,"ngIf"]},null),(n()(),o.Gb(-1,0,[": "])),(n()(),o.pb(35,0,null,0,3,"ion-thumbnail",[],null,null,null,r.Nb,r.S)),o.ob(36,49152,null,0,i.xb,[o.h,o.k],null,null),(n()(),o.gb(16777216,null,0,1,null,C)),o.ob(38,16384,null,0,a.j,[o.O,o.L],{ngIf:[0,"ngIf"]},null),(n()(),o.pb(39,0,null,null,13,"ion-item",[],null,null,null,r.sb,r.u)),o.ob(40,49152,null,0,i.G,[o.h,o.k],null,null),(n()(),o.pb(41,0,null,0,2,"ion-label",[["color","medium"]],null,null,null,r.tb,r.y)),o.ob(42,49152,null,0,i.M,[o.h,o.k],{color:[0,"color"]},null),(n()(),o.Gb(-1,0,["Book Genre:"])),(n()(),o.pb(44,0,null,0,8,"ion-select",[["formControlName","bookgenre"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ionBlur"],[null,"ionChange"]],function(n,e,l){var t=!0;return"ionBlur"===e&&(t=!1!==o.yb(n,45)._handleBlurEvent()&&t),"ionChange"===e&&(t=!1!==o.yb(n,45)._handleChangeEvent(l.target.value)&&t),t},r.Eb,r.I)),o.ob(45,16384,null,0,i.Mb,[o.k],null,null),o.Db(1024,null,u.g,function(n){return[n]},[i.Mb]),o.ob(47,671744,null,0,u.d,[[3,u.a],[8,null],[8,null],[6,u.g],[2,u.q]],{name:[0,"name"]},null),o.Db(2048,null,u.h,null,[u.d]),o.ob(49,16384,null,0,u.i,[[4,u.h]],null,null),o.ob(50,49152,null,0,i.lb,[o.h,o.k],null,null),(n()(),o.gb(16777216,null,0,1,null,D)),o.ob(52,278528,null,0,a.i,[o.O,o.L,o.s],{ngForOf:[0,"ngForOf"]},null),(n()(),o.pb(53,0,null,null,13,"ion-item",[],null,null,null,r.sb,r.u)),o.ob(54,49152,null,0,i.G,[o.h,o.k],null,null),(n()(),o.pb(55,0,null,0,2,"ion-label",[["color","medium"]],null,null,null,r.tb,r.y)),o.ob(56,49152,null,0,i.M,[o.h,o.k],{color:[0,"color"]},null),(n()(),o.Gb(-1,0,["Book Language:"])),(n()(),o.pb(58,0,null,0,8,"ion-select",[["formControlName","booklanguage"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ionBlur"],[null,"ionChange"]],function(n,e,l){var t=!0;return"ionBlur"===e&&(t=!1!==o.yb(n,59)._handleBlurEvent()&&t),"ionChange"===e&&(t=!1!==o.yb(n,59)._handleChangeEvent(l.target.value)&&t),t},r.Eb,r.I)),o.ob(59,16384,null,0,i.Mb,[o.k],null,null),o.Db(1024,null,u.g,function(n){return[n]},[i.Mb]),o.ob(61,671744,null,0,u.d,[[3,u.a],[8,null],[8,null],[6,u.g],[2,u.q]],{name:[0,"name"]},null),o.Db(2048,null,u.h,null,[u.d]),o.ob(63,16384,null,0,u.i,[[4,u.h]],null,null),o.ob(64,49152,null,0,i.lb,[o.h,o.k],null,null),(n()(),o.gb(16777216,null,0,1,null,I)),o.ob(66,278528,null,0,a.i,[o.O,o.L,o.s],{ngForOf:[0,"ngForOf"]},null),(n()(),o.pb(67,0,null,null,11,"ion-item",[],null,null,null,r.sb,r.u)),o.ob(68,49152,null,0,i.G,[o.h,o.k],null,null),(n()(),o.pb(69,0,null,0,2,"ion-label",[["color","medium"]],null,null,null,r.tb,r.y)),o.ob(70,49152,null,0,i.M,[o.h,o.k],{color:[0,"color"]},null),(n()(),o.Gb(-1,0,["Book's Author:"])),(n()(),o.pb(72,0,null,0,6,"ion-input",[["formControlName","bookauthor"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ionBlur"],[null,"ionChange"]],function(n,e,l){var t=!0;return"ionBlur"===e&&(t=!1!==o.yb(n,73)._handleBlurEvent()&&t),"ionChange"===e&&(t=!1!==o.yb(n,73)._handleInputEvent(l.target.value)&&t),t},r.ob,r.t)),o.ob(73,16384,null,0,i.Nb,[o.k],null,null),o.Db(1024,null,u.g,function(n){return[n]},[i.Nb]),o.ob(75,671744,null,0,u.d,[[3,u.a],[8,null],[8,null],[6,u.g],[2,u.q]],{name:[0,"name"]},null),o.Db(2048,null,u.h,null,[u.d]),o.ob(77,16384,null,0,u.i,[[4,u.h]],null,null),o.ob(78,49152,null,0,i.F,[o.h,o.k],{type:[0,"type"]},null),(n()(),o.pb(79,0,null,null,11,"ion-item",[],null,null,null,r.sb,r.u)),o.ob(80,49152,null,0,i.G,[o.h,o.k],null,null),(n()(),o.pb(81,0,null,0,2,"ion-text",[["color","medium"]],null,null,null,r.Lb,r.Q)),o.ob(82,49152,null,0,i.vb,[o.h,o.k],{color:[0,"color"]},null),(n()(),o.Gb(-1,0,["Your Rating for the book:"])),(n()(),o.pb(84,0,null,0,6,"ion-range",[["formControlName","bookrating"],["max","5"],["min","1"],["name","rating"],["pin","true"],["snaps",""],["tickInterval","1"],["value","5"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ionBlur"],[null,"ionChange"]],function(n,e,l){var t=!0;return"ionBlur"===e&&(t=!1!==o.yb(n,85)._handleBlurEvent()&&t),"ionChange"===e&&(t=!1!==o.yb(n,85)._handleChangeEvent(l.target.value)&&t),t},r.yb,r.D)),o.ob(85,16384,null,0,i.Mb,[o.k],null,null),o.Db(1024,null,u.g,function(n){return[n]},[i.Mb]),o.ob(87,671744,null,0,u.d,[[3,u.a],[8,null],[8,null],[6,u.g],[2,u.q]],{name:[0,"name"]},null),o.Db(2048,null,u.h,null,[u.d]),o.ob(89,16384,null,0,u.i,[[4,u.h]],null,null),o.ob(90,49152,null,0,i.ab,[o.h,o.k],{name:[0,"name"],min:[1,"min"],max:[2,"max"],pin:[3,"pin"],snaps:[4,"snaps"],value:[5,"value"]},null),(n()(),o.pb(91,0,null,null,11,"ion-item",[],null,null,null,r.sb,r.u)),o.ob(92,49152,null,0,i.G,[o.h,o.k],null,null),(n()(),o.pb(93,0,null,0,2,"ion-label",[["color","medium"]],null,null,null,r.tb,r.y)),o.ob(94,49152,null,0,i.M,[o.h,o.k],{color:[0,"color"]},null),(n()(),o.Gb(-1,0,["Your address:"])),(n()(),o.pb(96,0,null,0,6,"ion-input",[["formControlName","bookowneraddress"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ionBlur"],[null,"ionChange"]],function(n,e,l){var t=!0;return"ionBlur"===e&&(t=!1!==o.yb(n,97)._handleBlurEvent()&&t),"ionChange"===e&&(t=!1!==o.yb(n,97)._handleInputEvent(l.target.value)&&t),t},r.ob,r.t)),o.ob(97,16384,null,0,i.Nb,[o.k],null,null),o.Db(1024,null,u.g,function(n){return[n]},[i.Nb]),o.ob(99,671744,null,0,u.d,[[3,u.a],[8,null],[8,null],[6,u.g],[2,u.q]],{name:[0,"name"]},null),o.Db(2048,null,u.h,null,[u.d]),o.ob(101,16384,null,0,u.i,[[4,u.h]],null,null),o.ob(102,49152,null,0,i.F,[o.h,o.k],{type:[0,"type"]},null),(n()(),o.pb(103,0,null,null,11,"ion-item",[],null,null,null,r.sb,r.u)),o.ob(104,49152,null,0,i.G,[o.h,o.k],null,null),(n()(),o.pb(105,0,null,0,2,"ion-label",[["color","medium"]],null,null,null,r.tb,r.y)),o.ob(106,49152,null,0,i.M,[o.h,o.k],{color:[0,"color"]},null),(n()(),o.Gb(-1,0,["Your contact number:"])),(n()(),o.pb(108,0,null,0,6,"ion-input",[["formControlName","bookownertelnum"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ionBlur"],[null,"ionChange"]],function(n,e,l){var t=!0;return"ionBlur"===e&&(t=!1!==o.yb(n,109)._handleBlurEvent()&&t),"ionChange"===e&&(t=!1!==o.yb(n,109)._handleInputEvent(l.target.value)&&t),t},r.ob,r.t)),o.ob(109,16384,null,0,i.Nb,[o.k],null,null),o.Db(1024,null,u.g,function(n){return[n]},[i.Nb]),o.ob(111,671744,null,0,u.d,[[3,u.a],[8,null],[8,null],[6,u.g],[2,u.q]],{name:[0,"name"]},null),o.Db(2048,null,u.h,null,[u.d]),o.ob(113,16384,null,0,u.i,[[4,u.h]],null,null),o.ob(114,49152,null,0,i.F,[o.h,o.k],{type:[0,"type"]},null),(n()(),o.pb(115,0,null,null,11,"ion-row",[],null,null,null,r.Bb,r.G)),o.ob(116,49152,null,0,i.hb,[o.h,o.k],null,null),(n()(),o.pb(117,0,null,0,4,"ion-col",[],null,null,null,r.fb,r.k)),o.ob(118,49152,null,0,i.s,[o.h,o.k],null,null),(n()(),o.pb(119,0,null,0,2,"ion-button",[["expand","full"],["margin-top",""],["shape","round"],["style","color:#1B4F72"]],null,[[null,"click"]],function(n,e,l){var o=!0;return"click"===e&&(o=!1!==n.component.onSubmit()&&o),o},r.X,r.c)),o.ob(120,49152,null,0,i.j,[o.h,o.k],{disabled:[0,"disabled"],expand:[1,"expand"],shape:[2,"shape"]},null),(n()(),o.Gb(-1,0,["Submit"])),(n()(),o.pb(122,0,null,0,4,"ion-col",[],null,null,null,r.fb,r.k)),o.ob(123,49152,null,0,i.s,[o.h,o.k],null,null),(n()(),o.pb(124,0,null,0,2,"ion-button",[["expand","full"],["margin-top",""],["shape","round"],["style","color: grey"]],null,[[null,"click"]],function(n,e,l){var o=!0;return"click"===e&&(o=!1!==n.component.closeModal()&&o),o},r.X,r.c)),o.ob(125,49152,null,0,i.j,[o.h,o.k],{expand:[0,"expand"],shape:[1,"shape"]},null),(n()(),o.Gb(-1,0,["Cancel"]))],function(n,e){var l=e.component;n(e,2,0,!0),n(e,12,0,l.addBookFormGroup),n(e,18,0,"medium"),n(e,23,0,"bookname"),n(e,26,0,"text"),n(e,30,0,"medium"),n(e,33,0,!l.capturedImage),n(e,38,0,l.capturedImage),n(e,42,0,"medium"),n(e,47,0,"bookgenre"),n(e,52,0,l.bookgenre),n(e,56,0,"medium"),n(e,61,0,"booklanguage"),n(e,66,0,l.booklanguage),n(e,70,0,"medium"),n(e,75,0,"bookauthor"),n(e,78,0,"text"),n(e,82,0,"medium"),n(e,87,0,"bookrating"),n(e,90,0,"rating","1","5","true","","5"),n(e,94,0,"medium"),n(e,99,0,"bookowneraddress"),n(e,102,0,"text"),n(e,106,0,"medium"),n(e,111,0,"bookownertelnum"),n(e,114,0,"text"),n(e,120,0,l.addBookFormGroup.invalid,"full","round"),n(e,125,0,"full","round")},function(n,e){n(e,10,0,o.yb(e,14).ngClassUntouched,o.yb(e,14).ngClassTouched,o.yb(e,14).ngClassPristine,o.yb(e,14).ngClassDirty,o.yb(e,14).ngClassValid,o.yb(e,14).ngClassInvalid,o.yb(e,14).ngClassPending),n(e,20,0,o.yb(e,25).ngClassUntouched,o.yb(e,25).ngClassTouched,o.yb(e,25).ngClassPristine,o.yb(e,25).ngClassDirty,o.yb(e,25).ngClassValid,o.yb(e,25).ngClassInvalid,o.yb(e,25).ngClassPending),n(e,44,0,o.yb(e,49).ngClassUntouched,o.yb(e,49).ngClassTouched,o.yb(e,49).ngClassPristine,o.yb(e,49).ngClassDirty,o.yb(e,49).ngClassValid,o.yb(e,49).ngClassInvalid,o.yb(e,49).ngClassPending),n(e,58,0,o.yb(e,63).ngClassUntouched,o.yb(e,63).ngClassTouched,o.yb(e,63).ngClassPristine,o.yb(e,63).ngClassDirty,o.yb(e,63).ngClassValid,o.yb(e,63).ngClassInvalid,o.yb(e,63).ngClassPending),n(e,72,0,o.yb(e,77).ngClassUntouched,o.yb(e,77).ngClassTouched,o.yb(e,77).ngClassPristine,o.yb(e,77).ngClassDirty,o.yb(e,77).ngClassValid,o.yb(e,77).ngClassInvalid,o.yb(e,77).ngClassPending),n(e,84,0,o.yb(e,89).ngClassUntouched,o.yb(e,89).ngClassTouched,o.yb(e,89).ngClassPristine,o.yb(e,89).ngClassDirty,o.yb(e,89).ngClassValid,o.yb(e,89).ngClassInvalid,o.yb(e,89).ngClassPending),n(e,96,0,o.yb(e,101).ngClassUntouched,o.yb(e,101).ngClassTouched,o.yb(e,101).ngClassPristine,o.yb(e,101).ngClassDirty,o.yb(e,101).ngClassValid,o.yb(e,101).ngClassInvalid,o.yb(e,101).ngClassPending),n(e,108,0,o.yb(e,113).ngClassUntouched,o.yb(e,113).ngClassTouched,o.yb(e,113).ngClassPristine,o.yb(e,113).ngClassDirty,o.yb(e,113).ngClassValid,o.yb(e,113).ngClassInvalid,o.yb(e,113).ngClassPending)})}function w(n){return o.Ib(0,[(n()(),o.pb(0,0,null,null,1,"app-addbook",[],null,null,null,O,k)),o.ob(1,114688,null,0,y,[i.Gb,i.a,b.a,u.b,g.a,h.a,f,i.Jb,m.a,d.a,h.a],null,null)],function(n,e){n(e,1,0)},null)}var E=o.lb("app-addbook",y,w,{},{},[]),S=l("pMnS"),F=l("zA0m"),x=["None","Tel","Email"],P=l("JhVf"),B=l("fNyx"),A=l("S6gA"),j=l("+6W9"),_=l("9Z1F"),T=l("t/Na"),M=l("mI4i"),R=l("lUK6"),G=function(){function n(n,e){this.http=n,this.processHTTPMsgService=e}return n.prototype.submitFeedback=function(n){var e={headers:new T.h({"Content-Type":"application/json"})};return this.http.post(M.a+"feedback/",n,e).pipe(Object(_.a)(this.processHTTPMsgService.handleError))},n.prototype.getFeedback=function(){return this.http.get(M.a+"feedback").pipe(Object(_.a)(this.processHTTPMsgService.handleError))},n.prototype.getFeaturedFeedback=function(){return this.http.get(M.a+"feedback?rating=5").pipe(Object(_.a)(this.processHTTPMsgService.handleError))},n.ngInjectableDef=o.S({factory:function(){return new n(o.W(T.c),o.W(R.a))},token:n,providedIn:"root"}),n}(),N=l("LwiL"),L=function(n){return n[n.getQrCode=0]="getQrCode",n[n.getScannedCode=1]="getScannedCode",n[n.compareCodes=2]="compareCodes",n}({}),U=function(){function n(n,e,l,o,t,r,i,a,c,b,d,g,h,p,f,m,y,k){this._camera=n,this._alertController=e,this._modalController=l,this.authService=o,this.navCtrl=t,this.readarsService=r,this.baseURL=i,this.router=a,this.route=c,this.searchedMyData=b,this.fb=d,this.feedbackservice=g,this.booksService=h,this.reservedService=p,this.borrowedService=f,this.availableService=m,this.activatedRoute=y,this.barCodeScanner=k,this.username=void 0,this.reservedBooks=[],this.availableBooks=[],this.borrowedBooks=[],this.searchTerm="",this.bookIdsImages=new Map,this.bookIdImageMap=new Map,this.name="Angular",this.currentRouter=this.router.url,this.booklanguage=s.c,this.bookactions=s.a,this.contactType=x,this.submitted=null,this.showForm=!0,this.panelOpenState=!1,this.searchControl=new u.c}return n.prototype.ngOnInit=function(){var n=this;this.setFilteredItems(),this.authService.loadUserCredentials(),this.subscription=this.authService.getUsername().subscribe(function(e){console.log(e),n.username=e,n.booksService.getBooks().subscribe(function(e){n.allBooks=e,console.log("TAB3 BOOKS",n.allBooks)},function(e){return n.errMess=e}),n.prepareBookIdsImagesMap()})},n.prototype.ionViewWillEnter=function(){var n=this;this.booksService.getBooks().subscribe(function(e){n.allBooks=e,console.log("TAB3 BOOKS",n.allBooks)},function(e){return n.errMess=e})},n.prototype.prepareBookIdsImagesMap=function(){var n=this;this.booksService.getBookIds().subscribe(function(e){n.bookIds=e,n.storeBookIds(n.bookIds),n.lbookIds=n.loadBookIds();for(var l=function(e){n.booksService.getBookImage(n.lbookIds[e]).subscribe(function(l){n.url=l,console.log("this.url",n.url),n.bookIdImageMap.set(n.lbookIds[e],n.url),console.log("book image map",n.bookIdImageMap)},function(n){return console.log(n)})},o=0;o<n.lbookIds.length;o++)l(o)},function(e){return n.errMess=e})},n.prototype.storeBookIds=function(n){console.log("BookIds stored are :",n),localStorage.setItem("bookIds",JSON.stringify(n))},n.prototype.loadBookIds=function(){if(this.bookIds=JSON.parse(localStorage.getItem("bookIds")),console.log("bookIds ",this.bookIds),this.bookIds)return this.bookIds},n.prototype.ngAfterViewInit=function(){},n.prototype.refreshBookList=function(n){var e=this;setTimeout(function(){e.booksService.getBooks().subscribe(function(n){e.books=n},function(n){return e.errMess=n}),n.target.complete()},2e3)},n.prototype.setFilteredItems=function(){this.books=this.searchedMyData.filterItems(this.searchTerm),console.log("Searched my data",this.books)},n.prototype.deleteBook=function(n){var e=this;console.log("Deleting Book "+n),this.booksService.deleteBook(n).subscribe(function(n){return e.removebook=n},function(n){return e.errMess=n}),this.booksService.deleteBookImage(n).subscribe(function(n){return console.log(n)},function(n){return e.errMess=n}),this.delete=!1,this.ngOnInit()},n.prototype.getCodeValue=function(n){return"xyz"===n?L.getQrCode:"abc"===n?L.getScannedCode:void 0},n.prototype.scanToLendOrRelease=function(n){return c.b(this,void 0,void 0,function(){var e=this;return c.e(this,function(l){switch(l.label){case 0:return[4,this._alertController.create({header:"Choose your action",message:"Lend or Make Book Available",buttons:[{text:"Lend",handler:function(){e.scanForLend(n)}},{text:"Make Available",handler:function(){e.scanForRelease(n)}}]})];case 1:return[4,l.sent().present()];case 2:return l.sent(),[2]}})})},n.prototype.getQRCheckString=function(n){console.log("INSIDE GET CHECK QR STRING");for(var e=0;e<this.books.length;e++)if(this.books[e]._id===n)return this.qrCheckString=this.books[e]._id+this.books[e].bookowner.username+this.books[e].bookcurrentuser,console.log("QR CHECK STRING",this.qrCheckString),this.qrCheckString},n.prototype.scanForLend=function(n){var e=this;console.log("INSIDE LEND"),this.booksService.getBook(n).subscribe(function(l){e.bookcurrentUsername=l.bookcurrentuser,e.qrCheckString=l._id+l.bookowner.username+l.bookcurrentuser,console.log("QR CHECK STRING IS",e.qrCheckString),e.barCodeScanner.scan({preferFrontCamera:!1,showFlipCameraButton:!0,showTorchButton:!0,torchOn:!1,prompt:"Place a barcode inside the scan area",resultDisplayDuration:500,formats:"EAN_13,EAN_8,QR_CODE,PDF_417 ",orientation:"portrait"}).then(function(o){console.log("CHECK STRING IS ------\x3e",e.qrCheckString),e.scannedData=o,console.log("SCANNED DATA IS ------\x3e ",e.scannedData.text),e.qrCheckString===e.scannedData.text?(console.log("MATCH SUCCESS"),console.log("LENDING BOOK "+n),e.router.navigate([e.currentRouter]),e.book=l,e.book.bookavailable=!1,e.book.bookreserved=!0,e.book.bookborrowed=!0,e.book.bookcurrentuser=e.bookcurrentUsername,e.book.bookcurrentstatus="borrowed",e.booksService.lendBook(n,e.book).subscribe(function(n){console.log(n),e.borrowed=!0,e.reserved=!0,e.qrCheckString=""}),e.ngOnInit()):console.log("QR CODES DON'T MATCH")}).catch(function(n){console.log("Error",n)})},function(n){return e.errMess=n})},n.prototype.scanForRelease=function(n){var e=this;console.log("INSIDE MAKE AVAILABLE"),this.booksService.getBook(n).subscribe(function(l){e.bookcurrentUsername=l.bookcurrentuser,e.qrCheckString=l._id+l.bookowner.username+l.bookcurrentuser,console.log("QR CHECK STRING IS",e.qrCheckString),e.barCodeScanner.scan({preferFrontCamera:!1,showFlipCameraButton:!0,showTorchButton:!0,torchOn:!1,prompt:"Place a barcode inside the scan area",resultDisplayDuration:500,formats:"EAN_13,EAN_8,QR_CODE,PDF_417 ",orientation:"portrait"}).then(function(o){console.log("CHECK STRING IS ------\x3e",e.qrCheckString),e.scannedData=o,console.log("SCANNED DATA IS ------\x3e ",e.scannedData.text),e.qrCheckString===e.scannedData.text?(console.log("MATCH SUCCESS"),console.log("RELEASING BOOK "+n),e.router.navigate([e.currentRouter]),e.booksService.deleteQRBookImage(n,e.bookcurrentUsername).subscribe(function(n){console.log(n),console.log("QR IMAGE DELETED"),e.book=l,e.book.bookavailable=!0,e.book.bookreserved=!1,e.book.bookborrowed=!1,e.book.bookcurrentuser="",e.book.bookcurrentstatus="available",e.booksService.releaseBook(e.book._id,e.book).subscribe(function(n){console.log(n),e.available=!0,e.reserved=!1,e.qrCheckString=""})},function(n){return e.errMess=n}),e.ngOnInit()):console.log("QR CODES DON'T MATCH")}).catch(function(n){console.log("Error",n)})},function(n){return e.errMess=n})},n.prototype.loadMoreBooks=function(n){setTimeout(function(){},3e3)},n.prototype.addBookModal=function(){return c.b(this,void 0,void 0,function(){return c.e(this,function(n){switch(n.label){case 0:return[4,this._modalController.create({component:y})];case 1:return[2,n.sent().present()]}})})},n}(),q=l("ZYCi"),H=o.nb({encapsulation:0,styles:[[".profile-pic[_ngcontent-%COMP%]{width:200px;height:200px;border:1px solid gray;margin:10px auto}.welcome-card[_ngcontent-%COMP%]   ion-img[_ngcontent-%COMP%]{max-height:35vh;overflow:hidden}.display_heading[_ngcontent-%COMP%]{margin:10px auto}.spinner-container[_ngcontent-%COMP%]{width:100%;text-align:center;padding:10px}.book-card[_ngcontent-%COMP%]{margin:5px;padding:10px}.book-image[_ngcontent-%COMP%]{border:1px solid gray;margin:5px}.displaycard[_ngcontent-%COMP%]{margin:5px;padding:5px;background-color:#f5f5f5}.displayinnercard[_ngcontent-%COMP%]{margin-top:auto;margin-left:30px;padding:5px;background-color:#f8f8ff}.display_heading[_ngcontent-%COMP%]{margin-left:0;padding:0}ion-button[_ngcontent-%COMP%]{--background:#FBFCFC}ion-toolbar[_ngcontent-%COMP%]{--background:#1B4F72}"]],data:{}});function V(n){return o.Ib(0,[(n()(),o.pb(0,0,null,null,2,"ion-title",[["size","large"],["style","font:xx-large; font-family: 'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif;\n    color: #FDFEFE  ; font-weight: bolder;"]],null,null,null,r.Ob,r.T)),o.ob(1,49152,null,0,i.yb,[o.h,o.k],null,null),(n()(),o.Gb(-1,0,[" Manage "]))],null,null)}function $(n){return o.Ib(0,[(n()(),o.pb(0,0,null,null,2,"ion-note",[["style","color: green"]],null,null,null,r.xb,r.C)),o.ob(1,49152,null,0,i.W,[o.h,o.k],null,null),(n()(),o.Gb(2,0,["",""]))],null,function(n,e){n(e,2,0,e.parent.context.$implicit.bookcurrentstatus)})}function W(n){return o.Ib(0,[(n()(),o.pb(0,0,null,null,2,"ion-note",[["style","color: red"]],null,null,null,r.xb,r.C)),o.ob(1,49152,null,0,i.W,[o.h,o.k],null,null),(n()(),o.Gb(2,0,["",""]))],null,function(n,e){n(e,2,0,e.parent.context.$implicit.bookcurrentstatus)})}function K(n){return o.Ib(0,[(n()(),o.pb(0,0,null,null,2,"ion-note",[["style","color: orangered"]],null,null,null,r.xb,r.C)),o.ob(1,49152,null,0,i.W,[o.h,o.k],null,null),(n()(),o.Gb(2,0,["",""]))],null,function(n,e){n(e,2,0,e.parent.context.$implicit.bookcurrentstatus)})}function Q(n){return o.Ib(0,[(n()(),o.pb(0,0,null,null,1,"ion-icon",[["slot","icon-only"],["src","../assets/icon/trash.svg"]],null,[[null,"click"]],function(n,e,l){var o=!0;return"click"===e&&(o=!1!==n.component.deleteBook(n.parent.context.$implicit._id)&&o),o},r.lb,r.q)),o.ob(1,49152,null,0,i.B,[o.h,o.k],{src:[0,"src"]},null)],function(n,e){n(e,1,0,"../assets/icon/trash.svg")},null)}function Y(n){return o.Ib(0,[(n()(),o.pb(0,0,null,null,1,"ion-icon",[["slot","icon-only"],["src","../assets/icon/scan.svg"]],null,[[null,"click"]],function(n,e,l){var o=!0;return"click"===e&&(o=!1!==n.component.scanToLendOrRelease(n.parent.context.$implicit._id)&&o),o},r.lb,r.q)),o.ob(1,49152,null,0,i.B,[o.h,o.k],{src:[0,"src"]},null)],function(n,e){n(e,1,0,"../assets/icon/scan.svg")},null)}function z(n){return o.Ib(0,[(n()(),o.pb(0,0,null,null,34,"ion-item-sliding",[],null,null,null,r.rb,r.x)),o.ob(1,49152,null,0,i.L,[o.h,o.k],null,null),(n()(),o.pb(2,0,null,0,20,"ion-item",[],null,null,null,r.sb,r.u)),o.ob(3,49152,null,0,i.G,[o.h,o.k],null,null),(n()(),o.pb(4,0,null,0,5,"ion-card",[],null,null,null,r.db,r.e)),o.ob(5,49152,null,0,i.l,[o.h,o.k],null,null),(n()(),o.pb(6,0,null,0,3,"ion-thumbnail",[],null,null,null,r.Nb,r.S)),o.ob(7,49152,null,0,i.xb,[o.h,o.k],null,null),(n()(),o.pb(8,0,null,0,1,"ion-img",[],null,null,null,r.mb,r.r)),o.ob(9,49152,null,0,i.C,[o.h,o.k],{src:[0,"src"]},null),(n()(),o.pb(10,0,null,0,12,"ion-label",[["class","ion-text-wrap"]],null,null,null,r.tb,r.y)),o.ob(11,49152,null,0,i.M,[o.h,o.k],null,null),(n()(),o.pb(12,0,null,0,1,"strong",[],null,null,null,null,null)),(n()(),o.Gb(13,null,["",""])),(n()(),o.pb(14,0,null,0,1,"h3",[],null,null,null,null,null)),(n()(),o.Gb(15,null,[" in ",". By - ","."])),(n()(),o.pb(16,0,null,0,0,"p",[],null,null,null,null,null)),(n()(),o.gb(16777216,null,0,1,null,$)),o.ob(18,16384,null,0,a.j,[o.O,o.L],{ngIf:[0,"ngIf"]},null),(n()(),o.gb(16777216,null,0,1,null,W)),o.ob(20,16384,null,0,a.j,[o.O,o.L],{ngIf:[0,"ngIf"]},null),(n()(),o.gb(16777216,null,0,1,null,K)),o.ob(22,16384,null,0,a.j,[o.O,o.L],{ngIf:[0,"ngIf"]},null),(n()(),o.pb(23,0,null,0,5,"ion-item-options",[["side","start"]],null,null,null,r.qb,r.w)),o.ob(24,49152,null,0,i.K,[o.h,o.k],{side:[0,"side"]},null),(n()(),o.pb(25,0,null,0,3,"ion-item-option",[["color","danger"]],null,null,null,r.pb,r.v)),o.ob(26,49152,null,0,i.J,[o.h,o.k],{color:[0,"color"]},null),(n()(),o.gb(16777216,null,0,1,null,Q)),o.ob(28,16384,null,0,a.j,[o.O,o.L],{ngIf:[0,"ngIf"]},null),(n()(),o.pb(29,0,null,0,5,"ion-item-options",[["side","end"]],null,null,null,r.qb,r.w)),o.ob(30,49152,null,0,i.K,[o.h,o.k],{side:[0,"side"]},null),(n()(),o.pb(31,0,null,0,3,"ion-item-option",[],null,null,null,r.pb,r.v)),o.ob(32,49152,null,0,i.J,[o.h,o.k],null,null),(n()(),o.gb(16777216,null,0,1,null,Y)),o.ob(34,16384,null,0,a.j,[o.O,o.L],{ngIf:[0,"ngIf"]},null)],function(n,e){n(e,9,0,e.component.bookIdImageMap.get(e.context.$implicit._id)),n(e,18,0,"available"==e.context.$implicit.bookcurrentstatus),n(e,20,0,"borrowed"==e.context.$implicit.bookcurrentstatus),n(e,22,0,"reserved"==e.context.$implicit.bookcurrentstatus),n(e,24,0,"start"),n(e,26,0,"danger"),n(e,28,0,e.context.$implicit.isAvailable),n(e,30,0,"end"),n(e,34,0,(e.context.$implicit.isReserved||e.context.$implicit.isBorrowed)&&!e.context.$implicit.isAvailable)},function(n,e){n(e,13,0,e.context.$implicit.bookname),n(e,15,0,e.context.$implicit.booklanguage,e.context.$implicit.bookauthor)})}function J(n){return o.Ib(0,[(n()(),o.pb(0,0,null,null,5,"ion-header",[["collapse","condense"],["color","success"]],null,null,null,r.kb,r.p)),o.ob(1,49152,null,0,i.A,[o.h,o.k],{translucent:[0,"translucent"]},null),(n()(),o.pb(2,0,null,0,3,"ion-toolbar",[],null,null,null,r.Pb,r.U)),o.ob(3,49152,null,0,i.Ab,[o.h,o.k],null,null),(n()(),o.gb(16777216,null,0,1,null,V)),o.ob(5,16384,null,0,a.j,[o.O,o.L],{ngIf:[0,"ngIf"]},null),(n()(),o.pb(6,0,null,null,23,"ion-content",[],null,null,null,r.gb,r.l)),o.ob(7,49152,null,0,i.t,[o.h,o.k],null,null),(n()(),o.pb(8,0,null,0,6,"ion-button",[["expand","block"],["margin-top",""]],null,[[null,"click"]],function(n,e,l){var o=!0;return"click"===e&&(o=!1!==n.component.addBookModal()&&o),o},r.X,r.c)),o.ob(9,49152,null,0,i.j,[o.h,o.k],{expand:[0,"expand"]},null),(n()(),o.pb(10,0,null,0,1,"ion-icon",[["src","../assets/icon/add-circle.svg"],["style","color:#1B4F72; "]],null,null,null,r.lb,r.q)),o.ob(11,49152,null,0,i.B,[o.h,o.k],{src:[0,"src"]},null),(n()(),o.pb(12,0,null,0,2,"ion-note",[["style","color: #1B4F72; margin-left: 5px;"]],null,null,null,r.xb,r.C)),o.ob(13,49152,null,0,i.W,[o.h,o.k],null,null),(n()(),o.Gb(-1,0,[" Add New Book"])),(n()(),o.pb(15,0,null,0,6,"ion-searchbar",[["no-margin",""],["placeholder","Search my books by status, title or language ..."],["shape","round"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"ionChange"],[null,"ionBlur"]],function(n,e,l){var t=!0,r=n.component;return"ionBlur"===e&&(t=!1!==o.yb(n,17)._handleBlurEvent()&&t),"ionChange"===e&&(t=!1!==o.yb(n,17)._handleInputEvent(l.target.value)&&t),"ngModelChange"===e&&(t=!1!==(r.searchTerm=l)&&t),"ionChange"===e&&(t=!1!==r.setFilteredItems()&&t),t},r.Cb,r.H)),o.ob(16,49152,null,0,i.ib,[o.h,o.k],{placeholder:[0,"placeholder"]},null),o.ob(17,16384,null,0,i.Nb,[o.k],null,null),o.Db(1024,null,u.g,function(n){return[n]},[i.Nb]),o.ob(19,671744,null,0,u.k,[[8,null],[8,null],[8,null],[6,u.g]],{model:[0,"model"]},{update:"ngModelChange"}),o.Db(2048,null,u.h,null,[u.k]),o.ob(21,16384,null,0,u.i,[[4,u.h]],null,null),(n()(),o.pb(22,0,null,0,3,"ion-refresher",[["slot","fixed"]],null,[[null,"ionRefresh"]],function(n,e,l){var o=!0;return"ionRefresh"===e&&(o=!1!==n.component.refreshBookList(l)&&o),o},r.Ab,r.E)),o.ob(23,49152,null,0,i.bb,[o.h,o.k],null,null),(n()(),o.pb(24,0,null,0,1,"ion-refresher-content",[["pullingText","pull for update"],["refreshingText","...updating"]],null,null,null,r.zb,r.F)),o.ob(25,49152,null,0,i.cb,[o.h,o.k],{pullingText:[0,"pullingText"],refreshingText:[1,"refreshingText"]},null),(n()(),o.pb(26,0,null,0,3,"ion-list",[],null,null,null,r.vb,r.z)),o.ob(27,49152,null,0,i.N,[o.h,o.k],null,null),(n()(),o.gb(16777216,null,0,1,null,z)),o.ob(29,278528,null,0,a.i,[o.O,o.L,o.s],{ngForOf:[0,"ngForOf"]},null)],function(n,e){var l=e.component;n(e,1,0,!0),n(e,5,0,l.username),n(e,9,0,"block"),n(e,11,0,"../assets/icon/add-circle.svg"),n(e,16,0,"Search my books by status, title or language ..."),n(e,19,0,l.searchTerm),n(e,25,0,"pull for update","...updating"),n(e,29,0,l.allBooks)},function(n,e){n(e,15,0,o.yb(e,21).ngClassUntouched,o.yb(e,21).ngClassTouched,o.yb(e,21).ngClassPristine,o.yb(e,21).ngClassDirty,o.yb(e,21).ngClassValid,o.yb(e,21).ngClassInvalid,o.yb(e,21).ngClassPending)})}function X(n){return o.Ib(0,[(n()(),o.pb(0,0,null,null,1,"app-tab3",[],null,null,null,J,H)),o.ob(1,4308992,null,0,U,[g.a,i.a,i.Gb,d.a,i.Hb,P.a,"baseURL",q.m,q.a,N.a,u.b,G,b.a,A.a,j.a,B.a,q.a,F.a],null,null)],function(n,e){n(e,1,0)},null)}var Z=o.lb("app-tab3",U,X,{},{},[]),nn=function(){return function(){}}();l.d(e,"Tab3PageModuleNgFactory",function(){return en});var en=o.mb(t,[],function(n){return o.vb([o.wb(512,o.j,o.bb,[[8,[E,S.a,Z]],[3,o.j],o.x]),o.wb(4608,a.l,a.k,[o.u,[2,a.r]]),o.wb(4608,u.p,u.p,[]),o.wb(4608,i.b,i.b,[o.z,o.g]),o.wb(4608,i.Gb,i.Gb,[i.b,o.j,o.q,a.c]),o.wb(4608,i.Kb,i.Kb,[i.b,o.j,o.q,a.c]),o.wb(4608,u.b,u.b,[]),o.wb(1073742336,a.b,a.b,[]),o.wb(1073742336,u.n,u.n,[]),o.wb(1073742336,u.f,u.f,[]),o.wb(1073742336,i.Cb,i.Cb,[]),o.wb(1073742336,u.l,u.l,[]),o.wb(1073742336,nn,nn,[]),o.wb(1073742336,q.o,q.o,[[2,q.u],[2,q.m]]),o.wb(1073742336,t,t,[]),o.wb(1024,q.k,function(){return[[{path:"",component:U}]]},[])])})}}]);