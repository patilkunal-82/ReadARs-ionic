(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{"8cDG":function(n,l,e){"use strict";e.r(l);var t=e("CcnG"),o=function(){return function(){}}(),u=e("pMnS"),i=e("oBZk"),a=e("ZZ/e"),r=e("0mKY"),s=e("5IZ8"),c=e("Ip0R"),b=e("mrSG"),p=e("5uSc"),g=e("lGQG"),d=e("Pn9U"),m=e("t8sF"),f=e("d5rD"),h=function(){function n(n,l,e,t,o,u,i,a,r,s,c){var b=this;this.authService=l,this._camera=e,this._alertController=t,this._modalController=o,this.file=u,this.booksService=i,this.imageLoaderService=a,this.router=r,this.loadingController=s,this.toastCtrl=c,this.dataReader=new FileReader,this.username=void 0,this.showSkeleton=!0,setTimeout(function(){b.bookList=n.getAllBooks()},3e3)}return n.prototype.ngOnInit=function(){var n=this;setTimeout(function(){n.showSkeleton=!1},3e3),this.authService.loadUserCredentials(),this.subscription=this.authService.getUsername().subscribe(function(l){console.log(l),n.username=l,n.username&&n.booksService.getMyProfileImage(n.username).subscribe(function(l){n.url=l,console.log("this.url",n.url)},function(l){console.log("inside err mess"),console.log(l),n.url=void 0})})},n.prototype.presentLoading=function(){return b.a(this,void 0,void 0,function(){var n;return b.c(this,function(l){switch(l.label){case 0:return[4,this.loadingController.create({cssClass:"my-custom-class",duration:400})];case 1:return[4,(n=l.sent()).present()];case 2:return l.sent(),[4,n.onDidDismiss()];case 3:return l.sent(),console.log("Loading dismissed!"),[2]}})})},n.prototype.presentToast=function(n){return b.a(this,void 0,void 0,function(){return b.c(this,function(l){switch(l.label){case 0:return[4,this.toastCtrl.create({message:n,duration:3e3,position:"middle"})];case 1:return l.sent().present(),[2]}})})},n.prototype.refreshPage=function(){console.log("inside refreshpage"),window.location.reload()},n.prototype.ngOnDestroy=function(){this.subscription.unsubscribe()},n.prototype.clearCache=function(n){this.imageLoaderService.clearCache(),n.complete()},n.prototype.onImageLoad=function(n){console.log("image ready")},n.prototype.selectImageSource=function(){return b.a(this,void 0,void 0,function(){var n,l,e=this;return b.c(this,function(t){switch(t.label){case 0:return console.log("inside image source"),n={quality:100,destinationType:this._camera.DestinationType.FILE_URI,encodingType:this._camera.EncodingType.PNG,mediaType:this._camera.MediaType.PICTURE,targetHeight:180,targetWidth:100,correctOrientation:!0,sourceType:this._camera.PictureSourceType.CAMERA},l={quality:100,destinationType:this._camera.DestinationType.FILE_URI,encodingType:this._camera.EncodingType.PNG,mediaType:this._camera.MediaType.PICTURE,targetHeight:180,targetWidth:100,correctOrientation:!0,sourceType:this._camera.PictureSourceType.SAVEDPHOTOALBUM},[4,this._alertController.create({header:"Select Source",message:"Pick a source for your profile image",buttons:[{text:"Camera",handler:function(){e._camera.getPicture(n).then(function(n){console.log(n);var l=n.substring(n.lastIndexOf("/")+1),t=n.substring(0,n.lastIndexOf("/")+1);console.log("image name",l),console.log("image path",t),console.log("before read as data url"),e.file.readAsDataURL(t,l).then(function(n){return e.capturedImage=n}),console.log("after read as data url"),e.file.resolveLocalFilesystemUrl(n).then(function(n){console.log("inside resolve local file system url"),n.file(function(n){return e.readFile(n)})}).catch(function(n){console.log("error reading file")})},function(n){console.log(n)})}},{text:"Gallery",handler:function(){e._camera.getPicture(l).then(function(n){var l=n.substring(n.lastIndexOf("/")+1),t=n.substring(0,n.lastIndexOf("/")+1);e.file.readAsDataURL(t,l).then(function(n){return e.capturedImage=n}),e.file.resolveLocalFilesystemUrl(n).then(function(n){console.log("inside resolve local file system url"),n.file(function(n){return e.readFile(n)})}).catch(function(n){console.log("error reading file")})},function(n){console.log(n)})}}]})];case 1:return[4,t.sent().present()];case 2:return t.sent(),[2]}})})},n.prototype.readFile=function(n){var l=this,e=new FileReader;console.log("file type",n.type),console.log("file type",n.name),e.onloadend=function(){if(l.uploadData=new FormData,e.result){var t=new Blob([e.result],{type:n.type});l.uploadData.append("imageFile",t,n.name),l.booksService.uploadMyProfileImage(l.username,l.uploadData).subscribe(function(n){console.log(n),l.presentToast("Photo Updated SuccessFully!"),l.ngOnInit(),l.receivedImageData=n,l.base64Data=l.receivedImageData.pic,l.convertedImage="data:image/jpeg;base64,"+l.base64Data})}},e.readAsArrayBuffer(n)},n.prototype.logOut=function(){this.username=void 0,this.authService.logOut(),console.log("After authservice logout"),this.router.navigateByUrl("/login")},n}(),y=e("ZYCi"),v=t.nb({encapsulation:0,styles:[[".welcome-card[_ngcontent-%COMP%]   ion-img[_ngcontent-%COMP%]{max-height:35vh;overflow:hidden}.skeleton-image[_ngcontent-%COMP%]{height:175px}.profile-pic[_ngcontent-%COMP%]{width:200px;height:200px;border:1px solid gray;margin:10px auto}.display_heading[_ngcontent-%COMP%]{margin:10px auto;padding:10px}.my-custom-menu[_ngcontent-%COMP%]{--width:500px}ion-toolbar[_ngcontent-%COMP%]{--background:#145A32}ion-button[_ngcontent-%COMP%]{--background:#FDFEFE}.my-custom-class[_ngcontent-%COMP%]{--spinner-color:#fff}.center[_ngcontent-%COMP%]{margin-left:auto;margin-right:auto;display:block!important}ion-avatar[_ngcontent-%COMP%]{width:100%!important;height:100%!important;max-width:100px!important;max-height:100px!important;margin:20px auto auto}"]],data:{}});function w(n){return t.Ib(0,[(n()(),t.pb(0,0,null,null,2,"ion-avatar",[],null,null,null,i.X,i.b)),t.ob(1,49152,null,0,a.f,[t.h,t.k],null,null),(n()(),t.pb(2,0,null,0,0,"img",[],[[8,"src",4]],null,null,null,null))],null,function(n,l){n(l,2,0,l.component.url)})}function k(n){return t.Ib(0,[(n()(),t.pb(0,0,null,null,3,"img-loader",[["button",""],["style","margin-top: 30px;"],["useImg",""]],null,[[null,"load"]],function(n,l,e){var t=!0;return"load"===l&&(t=!1!==n.component.onImageLoad(e)&&t),t},r.b,r.a)),t.ob(1,114688,null,0,s.c,[t.k,t.D,s.b,s.a],{useImg:[0,"useImg"]},{load:"load"}),(n()(),t.gb(16777216,null,0,1,null,w)),t.ob(3,16384,null,0,c.j,[t.O,t.L],{ngIf:[0,"ngIf"]},null)],function(n,l){var e=l.component;n(l,1,0,""),n(l,3,0,e.url)},null)}function I(n){return t.Ib(0,[(n()(),t.pb(0,0,null,null,5,"img-loader",[["button",""],["style","margin-top: 30px;"]],null,null,null,r.b,r.a)),t.ob(1,114688,null,0,s.c,[t.k,t.D,s.b,s.a],null,null),(n()(),t.pb(2,0,null,0,3,"ion-avatar",[],null,null,null,i.X,i.b)),t.ob(3,49152,null,0,a.f,[t.h,t.k],null,null),(n()(),t.pb(4,0,null,0,1,"ion-skeleton-text",[["animated",""]],null,null,null,i.Fb,i.J)),t.ob(5,49152,null,0,a.ob,[t.h,t.k],{animated:[0,"animated"]},null)],function(n,l){n(l,1,0),n(l,5,0,"")},null)}function O(n){return t.Ib(0,[(n()(),t.pb(0,0,null,null,6,"ion-header",[["collapse","condense"],["color","success"]],null,null,null,i.mb,i.q)),t.ob(1,49152,null,0,a.B,[t.h,t.k],{translucent:[0,"translucent"]},null),(n()(),t.pb(2,0,null,0,4,"ion-toolbar",[],null,null,null,i.Qb,i.U)),t.ob(3,49152,null,0,a.Bb,[t.h,t.k],null,null),(n()(),t.pb(4,0,null,0,2,"ion-title",[["size","large"],["style","font:xx-large; font-family:-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\n      color: #FDFEFE  ; font-weight: bolder; font-size: 25px; white-space: normal;"]],null,null,null,i.Pb,i.T)),t.ob(5,49152,null,0,a.zb,[t.h,t.k],null,null),(n()(),t.Gb(6,0,["Hello, "," "])),(n()(),t.pb(7,0,null,null,27,"ion-content",[],null,null,null,i.ib,i.m)),t.ob(8,49152,null,0,a.u,[t.h,t.k],null,null),(n()(),t.pb(9,0,null,0,3,"ion-refresher",[["slot","fixed"]],null,[[null,"ionRefresh"]],function(n,l,e){var t=!0;return"ionRefresh"===l&&(t=!1!==n.component.clearCache(e)&&t),t},i.yb,i.B)),t.ob(10,49152,null,0,a.cb,[t.h,t.k],null,null),(n()(),t.pb(11,0,null,0,1,"ion-refresher-content",[],null,null,null,i.xb,i.C)),t.ob(12,49152,null,0,a.db,[t.h,t.k],null,null),(n()(),t.gb(16777216,null,0,1,null,k)),t.ob(14,16384,null,0,c.j,[t.O,t.L],{ngIf:[0,"ngIf"]},null),(n()(),t.gb(16777216,null,0,1,null,I)),t.ob(16,16384,null,0,c.j,[t.O,t.L],{ngIf:[0,"ngIf"]},null),(n()(),t.pb(17,0,null,0,17,"ion-list",[["style","margin-top: 30px;"]],null,null,null,i.vb,i.y)),t.ob(18,49152,null,0,a.O,[t.h,t.k],null,null),(n()(),t.pb(19,0,null,0,3,"ion-item",[],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.selectImageSource()&&t),t},i.sb,i.v)),t.ob(20,49152,null,0,a.H,[t.h,t.k],null,null),(n()(),t.pb(21,0,null,0,1,"span",[["style","font-size: small;"]],null,null,null,null,null)),(n()(),t.Gb(-1,null,["Upload/Edit Your Photo"])),(n()(),t.pb(23,0,null,0,3,"ion-item",[],null,null,null,i.sb,i.v)),t.ob(24,49152,null,0,a.H,[t.h,t.k],null,null),(n()(),t.pb(25,0,null,0,1,"span",[["style","color:darkgrey; font-size: small;"]],null,null,null,null,null)),(n()(),t.Gb(-1,null,["Update Profile"])),(n()(),t.pb(27,0,null,0,3,"ion-item",[],null,null,null,i.sb,i.v)),t.ob(28,49152,null,0,a.H,[t.h,t.k],null,null),(n()(),t.pb(29,0,null,0,1,"span",[["style","color:darkgrey; font-size: small;"]],null,null,null,null,null)),(n()(),t.Gb(-1,null,["Wallet"])),(n()(),t.pb(31,0,null,0,3,"ion-item",[],null,null,null,i.sb,i.v)),t.ob(32,49152,null,0,a.H,[t.h,t.k],null,null),(n()(),t.pb(33,0,null,0,1,"ion-icon",[["src","../assets/icon/log-out-outline.svg"]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.logOut()&&t),t},i.nb,i.r)),t.ob(34,49152,null,0,a.C,[t.h,t.k],{src:[0,"src"]},null)],function(n,l){var e=l.component;n(l,1,0,!0),n(l,14,0,!e.showSkeleton),n(l,16,0,e.showSkeleton),n(l,34,0,"../assets/icon/log-out-outline.svg")},function(n,l){n(l,6,0,l.component.username)})}function C(n){return t.Ib(0,[(n()(),t.pb(0,0,null,null,1,"app-tab2",[],null,null,null,O,v)),t.ob(1,245760,null,0,h,[p.a,g.a,d.a,a.b,a.Hb,m.a,f.a,s.b,y.m,a.Fb,a.Pb],null,null)],function(n,l){n(l,1,0)},null)}var x=t.lb("app-tab2",h,C,{},{},[]),P=e("gIcY"),S=e("t/Na"),_=e("Yttj");e.d(l,"Tab2PageModuleNgFactory",function(){return T});var T=t.mb(o,[],function(n){return t.vb([t.wb(512,t.j,t.bb,[[8,[u.a,x]],[3,t.j],t.x]),t.wb(4608,c.l,c.k,[t.u,[2,c.r]]),t.wb(4608,a.c,a.c,[t.z,t.g]),t.wb(4608,a.Hb,a.Hb,[a.c,t.j,t.q,c.c]),t.wb(4608,a.Lb,a.Lb,[a.c,t.j,t.q,c.c]),t.wb(4608,P.r,P.r,[]),t.wb(4608,S.j,S.p,[c.c,t.B,S.n]),t.wb(4608,S.q,S.q,[S.j,S.o]),t.wb(5120,S.a,function(n){return[n]},[S.q]),t.wb(4608,S.m,S.m,[]),t.wb(6144,S.k,null,[S.m]),t.wb(4608,S.i,S.i,[S.k]),t.wb(6144,S.b,null,[S.i]),t.wb(4608,S.g,S.l,[S.b,t.q]),t.wb(4608,S.c,S.c,[S.g]),t.wb(4608,m.a,m.a,[]),t.wb(4608,s.a,s.a,[]),t.wb(4608,s.b,s.b,[s.a,m.a,S.c,a.Kb,_.a]),t.wb(1073742336,c.b,c.b,[]),t.wb(1073742336,a.Db,a.Db,[]),t.wb(1073742336,P.p,P.p,[]),t.wb(1073742336,P.f,P.f,[]),t.wb(1073742336,y.o,y.o,[[2,y.u],[2,y.m]]),t.wb(1073742336,S.e,S.e,[]),t.wb(1073742336,S.d,S.d,[]),t.wb(1073742336,s.d,s.d,[]),t.wb(1073742336,o,o,[]),t.wb(256,S.n,"XSRF-TOKEN",[]),t.wb(256,S.o,"X-XSRF-TOKEN",[]),t.wb(1024,y.k,function(){return[[{path:"",component:h}]]},[])])})}}]);