(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{"8cDG":function(n,e,l){"use strict";l.r(e);var o=l("CcnG"),t=function(){return function(){}}(),u=l("pMnS"),r=l("oBZk"),a=l("ZZ/e"),i=l("0mKY"),c=l("5IZ8"),s=l("Ip0R"),b=l("mrSG"),g=l("5uSc"),p=l("lGQG"),m=l("Pn9U"),f=l("t8sF"),d=l("d5rD"),h=function(){function n(n,e,l,o,t,u,r,a,i){var c=this;this.authService=e,this._camera=l,this._alertController=o,this._modalController=t,this.file=u,this.booksService=r,this.imageLoaderService=a,this.router=i,this.dataReader=new FileReader,this.username=void 0,setTimeout(function(){c.bookList=n.getAllBooks()},3e3)}return n.prototype.ngOnInit=function(){var n=this;this.authService.loadUserCredentials(),this.subscription=this.authService.getUsername().subscribe(function(e){console.log(e),n.username=e,n.booksService.getMyProfileImage(n.username).subscribe(function(e){n.url=e,console.log("this.url",n.url)},function(e){console.log("inside err mess"),console.log(e),n.url=void 0})})},n.prototype.ngOnDestroy=function(){this.subscription.unsubscribe()},n.prototype.clearCache=function(n){this.imageLoaderService.clearCache(),n.complete()},n.prototype.onImageLoad=function(n){console.log("image ready")},n.prototype.selectImageSource=function(){return b.b(this,void 0,void 0,function(){var n,e,l=this;return b.e(this,function(o){switch(o.label){case 0:return console.log("inside image source"),n={quality:100,destinationType:this._camera.DestinationType.FILE_URI,encodingType:this._camera.EncodingType.PNG,mediaType:this._camera.MediaType.PICTURE,targetHeight:180,targetWidth:100,correctOrientation:!0,sourceType:this._camera.PictureSourceType.CAMERA},e={quality:100,destinationType:this._camera.DestinationType.FILE_URI,encodingType:this._camera.EncodingType.PNG,mediaType:this._camera.MediaType.PICTURE,targetHeight:180,targetWidth:100,correctOrientation:!0,sourceType:this._camera.PictureSourceType.SAVEDPHOTOALBUM},[4,this._alertController.create({header:"Select Source",message:"Pick a source for your image",buttons:[{text:"Camera",handler:function(){l._camera.getPicture(n).then(function(n){console.log(n);var e=n.substring(n.lastIndexOf("/")+1),o=n.substring(0,n.lastIndexOf("/")+1);console.log("image name",e),console.log("image path",o),console.log("before read as data url"),l.file.readAsDataURL(o,e).then(function(n){return l.capturedImage=n}),console.log("after read as data url"),l.file.resolveLocalFilesystemUrl(n).then(function(n){console.log("inside resolve local file system url"),n.file(function(n){return l.readFile(n)})}).catch(function(n){console.log("error reading file")})},function(n){console.log(n)})}},{text:"Gallery",handler:function(){l._camera.getPicture(e).then(function(n){var e=n.substring(n.lastIndexOf("/")+1),o=n.substring(0,n.lastIndexOf("/")+1);l.file.readAsDataURL(o,e).then(function(n){return l.capturedImage=n}),l.file.resolveLocalFilesystemUrl(n).then(function(n){console.log("inside resolve local file system url"),n.file(function(n){return l.readFile(n)})}).catch(function(n){console.log("error reading file")})},function(n){console.log(n)})}}]})];case 1:return[4,o.sent().present()];case 2:return o.sent(),[2]}})})},n.prototype.readFile=function(n){var e=this,l=new FileReader;console.log("file type",n.type),console.log("file type",n.name),l.onloadend=function(){if(e.uploadData=new FormData,l.result){var o=new Blob([l.result],{type:n.type});e.uploadData.append("imageFile",o,n.name),e.booksService.uploadMyProfileImage(e.username,e.uploadData).subscribe(function(n){console.log(n),e.receivedImageData=n,e.base64Data=e.receivedImageData.pic,e.convertedImage="data:image/jpeg;base64,"+e.base64Data})}},l.readAsArrayBuffer(n)},n.prototype.logOut=function(){this.username=void 0,this.authService.logOut(),console.log("After authservice logout"),this.router.navigateByUrl("/login")},n}(),y=l("ZYCi"),v=o.nb({encapsulation:0,styles:[[".welcome-card[_ngcontent-%COMP%]   ion-img[_ngcontent-%COMP%]{max-height:35vh;overflow:hidden}.skeleton-image[_ngcontent-%COMP%]{height:175px}.profile-pic[_ngcontent-%COMP%]{width:200px;height:200px;border:1px solid gray;margin:10px auto}.display_heading[_ngcontent-%COMP%]{margin:10px auto;padding:10px}.my-custom-menu[_ngcontent-%COMP%]{--width:500px}ion-toolbar[_ngcontent-%COMP%]{--background:#145A32}"]],data:{}});function w(n){return o.Ib(0,[(n()(),o.pb(0,0,null,null,2,"ion-avatar",[],null,null,null,r.W,r.b)),o.ob(1,49152,null,0,a.e,[o.h,o.k],null,null),(n()(),o.pb(2,0,null,0,0,"img",[["style","margin-right: 10px;"]],[[8,"src",4]],[[null,"click"]],function(n,e,l){var o=!0;return"click"===e&&(o=!1!==n.component.selectImageSource()&&o),o},null,null))],null,function(n,e){n(e,2,0,e.component.url)})}function I(n){return o.Ib(0,[(n()(),o.pb(0,0,null,null,2,"ion-avatar",[],null,null,null,r.W,r.b)),o.ob(1,49152,null,0,a.e,[o.h,o.k],null,null),(n()(),o.pb(2,0,null,0,0,"img",[["src","../assets/icon/person-outline.svg"],["style","margin-right: 10px;"]],null,[[null,"click"]],function(n,e,l){var o=!0;return"click"===e&&(o=!1!==n.component.selectImageSource()&&o),o},null,null))],null,null)}function k(n){return o.Ib(0,[(n()(),o.pb(0,0,null,null,12,"ion-toolbar",[],null,null,null,r.Pb,r.U)),o.ob(1,49152,null,0,a.Ab,[o.h,o.k],null,null),(n()(),o.pb(2,0,null,0,5,"img-loader",[["button",""],["useImg",""]],null,[[null,"load"]],function(n,e,l){var o=!0;return"load"===e&&(o=!1!==n.component.onImageLoad(l)&&o),o},i.b,i.a)),o.ob(3,114688,null,0,c.c,[o.k,o.D,c.b,c.a],{useImg:[0,"useImg"]},{load:"load"}),(n()(),o.gb(16777216,null,0,1,null,w)),o.ob(5,16384,null,0,s.j,[o.O,o.L],{ngIf:[0,"ngIf"]},null),(n()(),o.gb(16777216,null,0,1,null,I)),o.ob(7,16384,null,0,s.j,[o.O,o.L],{ngIf:[0,"ngIf"]},null),(n()(),o.pb(8,0,null,0,2,"ion-title",[["size","large"],["style","font:xx-large; font-family:-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\n      color: #FDFEFE  ; font-weight: bolder; font-size: 25px; white-space: normal;"]],null,null,null,r.Ob,r.T)),o.ob(9,49152,null,0,a.yb,[o.h,o.k],null,null),(n()(),o.Gb(10,0,["Hello, "," "])),(n()(),o.pb(11,0,null,0,1,"ion-icon",[["name","log-out"],["size","large"],["style","color: #FDFEFE; background-color: #145A32;"]],null,[[null,"click"]],function(n,e,l){var o=!0;return"click"===e&&(o=!1!==n.component.logOut()&&o),o},r.mb,r.r)),o.ob(12,49152,null,0,a.B,[o.h,o.k],{name:[0,"name"],size:[1,"size"]},null)],function(n,e){var l=e.component;n(e,3,0,""),n(e,5,0,l.url),n(e,7,0,!l.url),n(e,12,0,"log-out","large")},function(n,e){n(e,10,0,e.component.username)})}function O(n){return o.Ib(0,[(n()(),o.pb(0,0,null,null,1,"ion-img",[["height","100"]],null,null,null,r.nb,r.s)),o.ob(1,49152,null,0,a.C,[o.h,o.k],{src:[0,"src"]},null)],function(n,e){n(e,1,0,e.component.capturedImage)},null)}function S(n){return o.Ib(0,[(n()(),o.pb(0,0,null,null,3,"ion-header",[["collapse","condense"],["color","success"]],null,null,null,r.lb,r.q)),o.ob(1,49152,null,0,a.A,[o.h,o.k],{translucent:[0,"translucent"]},null),(n()(),o.gb(16777216,null,0,1,null,k)),o.ob(3,16384,null,0,s.j,[o.O,o.L],{ngIf:[0,"ngIf"]},null),(n()(),o.pb(4,0,null,null,9,"ion-content",[],null,null,null,r.hb,r.m)),o.ob(5,49152,null,0,a.t,[o.h,o.k],null,null),(n()(),o.pb(6,0,null,0,3,"ion-refresher",[["slot","fixed"]],null,[[null,"ionRefresh"]],function(n,e,l){var o=!0;return"ionRefresh"===e&&(o=!1!==n.component.clearCache(l)&&o),o},r.Ab,r.E)),o.ob(7,49152,null,0,a.bb,[o.h,o.k],null,null),(n()(),o.pb(8,0,null,0,1,"ion-refresher-content",[],null,null,null,r.zb,r.F)),o.ob(9,49152,null,0,a.cb,[o.h,o.k],null,null),(n()(),o.pb(10,0,null,0,3,"ion-thumbnail",[],null,null,null,r.Nb,r.S)),o.ob(11,49152,null,0,a.xb,[o.h,o.k],null,null),(n()(),o.gb(16777216,null,0,1,null,O)),o.ob(13,16384,null,0,s.j,[o.O,o.L],{ngIf:[0,"ngIf"]},null)],function(n,e){var l=e.component;n(e,1,0,!0),n(e,3,0,l.username),n(e,13,0,l.capturedImage)},null)}function x(n){return o.Ib(0,[(n()(),o.pb(0,0,null,null,1,"app-tab2",[],null,null,null,S,v)),o.ob(1,245760,null,0,h,[g.a,p.a,m.a,a.a,a.Gb,f.a,d.a,c.b,y.m],null,null)],function(n,e){n(e,1,0)},null)}var C=o.lb("app-tab2",h,x,{},{},[]),T=l("gIcY"),_=l("t/Na"),F=l("Yttj");l.d(e,"Tab2PageModuleNgFactory",function(){return P});var P=o.mb(t,[],function(n){return o.vb([o.wb(512,o.j,o.bb,[[8,[u.a,C]],[3,o.j],o.x]),o.wb(4608,s.l,s.k,[o.u,[2,s.r]]),o.wb(4608,a.b,a.b,[o.z,o.g]),o.wb(4608,a.Gb,a.Gb,[a.b,o.j,o.q,s.c]),o.wb(4608,a.Kb,a.Kb,[a.b,o.j,o.q,s.c]),o.wb(4608,T.p,T.p,[]),o.wb(4608,_.j,_.p,[s.c,o.B,_.n]),o.wb(4608,_.q,_.q,[_.j,_.o]),o.wb(5120,_.a,function(n){return[n]},[_.q]),o.wb(4608,_.m,_.m,[]),o.wb(6144,_.k,null,[_.m]),o.wb(4608,_.i,_.i,[_.k]),o.wb(6144,_.b,null,[_.i]),o.wb(4608,_.g,_.l,[_.b,o.q]),o.wb(4608,_.c,_.c,[_.g]),o.wb(4608,f.a,f.a,[]),o.wb(4608,c.a,c.a,[]),o.wb(4608,c.b,c.b,[c.a,f.a,_.c,a.Jb,F.a]),o.wb(1073742336,s.b,s.b,[]),o.wb(1073742336,a.Cb,a.Cb,[]),o.wb(1073742336,T.n,T.n,[]),o.wb(1073742336,T.f,T.f,[]),o.wb(1073742336,y.o,y.o,[[2,y.u],[2,y.m]]),o.wb(1073742336,_.e,_.e,[]),o.wb(1073742336,_.d,_.d,[]),o.wb(1073742336,c.d,c.d,[]),o.wb(1073742336,t,t,[]),o.wb(256,_.n,"XSRF-TOKEN",[]),o.wb(256,_.o,"X-XSRF-TOKEN",[]),o.wb(1024,y.k,function(){return[[{path:"",component:h}]]},[])])})}}]);