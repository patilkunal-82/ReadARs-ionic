(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{"8cDG":function(e,n,l){"use strict";l.r(n);var t=l("CcnG"),o=function(){return function(){}}(),a=l("pMnS"),r=l("oBZk"),u=l("ZZ/e"),i=l("0mKY"),c=l("5IZ8"),s=l("Ip0R"),b=l("mrSG"),g=l("5uSc"),p=l("lGQG"),d=l("Pn9U"),f=l("t8sF"),m=l("d5rD"),h=function(){function e(e,n,l,t,o,a,r,u){var i=this;this.authService=n,this._camera=l,this._alertController=t,this._modalController=o,this.file=a,this.booksService=r,this.imageLoaderService=u,this.dataReader=new FileReader,this.username=void 0,setTimeout(function(){i.bookList=e.getAllBooks()},3e3)}return e.prototype.ngOnInit=function(){var e=this;this.authService.loadUserCredentials(),this.subscription=this.authService.getUsername().subscribe(function(n){console.log(n),e.username=n,e.booksService.getMyProfileImage(e.username).subscribe(function(n){e.url=n,console.log("this.url",e.url)},function(e){return console.log(e)})})},e.prototype.ngOnDestroy=function(){this.subscription.unsubscribe()},e.prototype.clearCache=function(e){this.imageLoaderService.clearCache(),e.complete()},e.prototype.onImageLoad=function(e){console.log("image ready")},e.prototype.selectImageSource=function(){return b.b(this,void 0,void 0,function(){var e,n,l=this;return b.e(this,function(t){switch(t.label){case 0:return console.log("inside image source"),e={quality:100,destinationType:this._camera.DestinationType.FILE_URI,encodingType:this._camera.EncodingType.PNG,mediaType:this._camera.MediaType.PICTURE,targetHeight:180,targetWidth:100,correctOrientation:!0,sourceType:this._camera.PictureSourceType.CAMERA},n={quality:100,destinationType:this._camera.DestinationType.FILE_URI,encodingType:this._camera.EncodingType.PNG,mediaType:this._camera.MediaType.PICTURE,targetHeight:180,targetWidth:100,correctOrientation:!0,sourceType:this._camera.PictureSourceType.SAVEDPHOTOALBUM},[4,this._alertController.create({header:"Select Source",message:"Pick a source for your image",buttons:[{text:"Camera",handler:function(){l._camera.getPicture(e).then(function(e){console.log(e);var n=e.substring(e.lastIndexOf("/")+1),t=e.substring(0,e.lastIndexOf("/")+1);console.log("image name",n),console.log("image path",t),console.log("before read as data url"),l.file.readAsDataURL(t,n).then(function(e){return l.capturedImage=e}),console.log("after read as data url"),l.file.resolveLocalFilesystemUrl(e).then(function(e){console.log("inside resolve local file system url"),e.file(function(e){return l.readFile(e)})}).catch(function(e){console.log("error reading file")})},function(e){console.log(e)})}},{text:"Gallery",handler:function(){l._camera.getPicture(n).then(function(e){var n=e.substring(e.lastIndexOf("/")+1),t=e.substring(0,e.lastIndexOf("/")+1);l.file.readAsDataURL(t,n).then(function(e){return l.capturedImage=e}),l.file.resolveLocalFilesystemUrl(e).then(function(e){console.log("inside resolve local file system url"),e.file(function(e){return l.readFile(e)})}).catch(function(e){console.log("error reading file")})},function(e){console.log(e)})}}]})];case 1:return[4,t.sent().present()];case 2:return t.sent(),[2]}})})},e.prototype.readFile=function(e){var n=this,l=new FileReader;console.log("file type",e.type),console.log("file type",e.name),l.onloadend=function(){if(n.uploadData=new FormData,l.result){var t=new Blob([l.result],{type:e.type});n.uploadData.append("imageFile",t,e.name),n.booksService.uploadMyProfileImage(n.username,n.uploadData).subscribe(function(e){console.log(e),n.receivedImageData=e,n.base64Data=n.receivedImageData.pic,n.convertedImage="data:image/jpeg;base64,"+n.base64Data})}},l.readAsArrayBuffer(e)},e}(),y=t.nb({encapsulation:0,styles:[[".welcome-card[_ngcontent-%COMP%]   ion-img[_ngcontent-%COMP%]{max-height:35vh;overflow:hidden}.skeleton-image[_ngcontent-%COMP%]{height:175px}.profile-pic[_ngcontent-%COMP%]{width:200px;height:200px;border:1px solid gray;margin:10px auto}.display_heading[_ngcontent-%COMP%]{margin:10px auto;padding:10px}.my-custom-menu[_ngcontent-%COMP%]{--width:500px}ion-toolbar[_ngcontent-%COMP%]{--background:#145A32}"]],data:{}});function w(e){return t.Ib(0,[(e()(),t.pb(0,0,null,null,3,"ion-avatar",[],null,null,null,r.W,r.b)),t.ob(1,49152,null,0,u.e,[t.h,t.k],null,null),(e()(),t.pb(2,0,null,0,1,"img-loader",[["button",""],["useImg",""]],null,[[null,"click"],[null,"load"]],function(e,n,l){var t=!0,o=e.component;return"click"===n&&(t=!1!==o.selectImageSource()&&t),"load"===n&&(t=!1!==o.onImageLoad(l)&&t),t},i.b,i.a)),t.ob(3,114688,null,0,c.c,[t.k,t.D,c.b,c.a],{useImg:[0,"useImg"],src:[1,"src"]},{load:"load"})],function(e,n){e(n,3,0,"",n.component.url)},null)}function I(e){return t.Ib(0,[(e()(),t.pb(0,0,null,null,1,"ion-img",[["height","100"]],null,null,null,r.nb,r.s)),t.ob(1,49152,null,0,u.C,[t.h,t.k],{src:[0,"src"]},null)],function(e,n){e(n,1,0,n.component.capturedImage)},null)}function v(e){return t.Ib(0,[(e()(),t.pb(0,0,null,null,8,"ion-header",[["collapse","condense"],["color","success"]],null,null,null,r.lb,r.q)),t.ob(1,49152,null,0,u.A,[t.h,t.k],{translucent:[0,"translucent"]},null),(e()(),t.pb(2,0,null,0,6,"ion-toolbar",[],null,null,null,r.Pb,r.U)),t.ob(3,49152,null,0,u.Ab,[t.h,t.k],null,null),(e()(),t.gb(16777216,null,0,1,null,w)),t.ob(5,16384,null,0,s.j,[t.O,t.L],{ngIf:[0,"ngIf"]},null),(e()(),t.pb(6,0,null,0,2,"ion-title",[["size","large"],["style","font:xx-large; font-family:-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\n      color: #FDFEFE  ; font-weight: bolder; font-size: 25px; white-space: normal;"]],null,null,null,r.Ob,r.T)),t.ob(7,49152,null,0,u.yb,[t.h,t.k],null,null),(e()(),t.Gb(8,0,["Hello, "," "])),(e()(),t.pb(9,0,null,null,9,"ion-content",[],null,null,null,r.hb,r.m)),t.ob(10,49152,null,0,u.t,[t.h,t.k],null,null),(e()(),t.pb(11,0,null,0,3,"ion-refresher",[["slot","fixed"]],null,[[null,"ionRefresh"]],function(e,n,l){var t=!0;return"ionRefresh"===n&&(t=!1!==e.component.clearCache(l)&&t),t},r.Ab,r.E)),t.ob(12,49152,null,0,u.bb,[t.h,t.k],null,null),(e()(),t.pb(13,0,null,0,1,"ion-refresher-content",[],null,null,null,r.zb,r.F)),t.ob(14,49152,null,0,u.cb,[t.h,t.k],null,null),(e()(),t.pb(15,0,null,0,3,"ion-thumbnail",[],null,null,null,r.Nb,r.S)),t.ob(16,49152,null,0,u.xb,[t.h,t.k],null,null),(e()(),t.gb(16777216,null,0,1,null,I)),t.ob(18,16384,null,0,s.j,[t.O,t.L],{ngIf:[0,"ngIf"]},null)],function(e,n){var l=n.component;e(n,1,0,!0),e(n,5,0,l.username),e(n,18,0,l.capturedImage)},function(e,n){e(n,8,0,n.component.username)})}function k(e){return t.Ib(0,[(e()(),t.pb(0,0,null,null,1,"app-tab2",[],null,null,null,v,y)),t.ob(1,245760,null,0,h,[g.a,p.a,d.a,u.a,u.Gb,f.a,m.a,c.b],null,null)],function(e,n){e(n,1,0)},null)}var C=t.lb("app-tab2",h,k,{},{},[]),O=l("gIcY"),S=l("t/Na"),T=l("Yttj"),_=l("ZYCi");l.d(n,"Tab2PageModuleNgFactory",function(){return x});var x=t.mb(o,[],function(e){return t.vb([t.wb(512,t.j,t.bb,[[8,[a.a,C]],[3,t.j],t.x]),t.wb(4608,s.l,s.k,[t.u,[2,s.r]]),t.wb(4608,u.b,u.b,[t.z,t.g]),t.wb(4608,u.Gb,u.Gb,[u.b,t.j,t.q,s.c]),t.wb(4608,u.Kb,u.Kb,[u.b,t.j,t.q,s.c]),t.wb(4608,O.p,O.p,[]),t.wb(4608,S.j,S.p,[s.c,t.B,S.n]),t.wb(4608,S.q,S.q,[S.j,S.o]),t.wb(5120,S.a,function(e){return[e]},[S.q]),t.wb(4608,S.m,S.m,[]),t.wb(6144,S.k,null,[S.m]),t.wb(4608,S.i,S.i,[S.k]),t.wb(6144,S.b,null,[S.i]),t.wb(4608,S.g,S.l,[S.b,t.q]),t.wb(4608,S.c,S.c,[S.g]),t.wb(4608,f.a,f.a,[]),t.wb(4608,c.a,c.a,[]),t.wb(4608,c.b,c.b,[c.a,f.a,S.c,u.Jb,T.a]),t.wb(1073742336,s.b,s.b,[]),t.wb(1073742336,u.Cb,u.Cb,[]),t.wb(1073742336,O.n,O.n,[]),t.wb(1073742336,O.f,O.f,[]),t.wb(1073742336,_.o,_.o,[[2,_.u],[2,_.m]]),t.wb(1073742336,S.e,S.e,[]),t.wb(1073742336,S.d,S.d,[]),t.wb(1073742336,c.d,c.d,[]),t.wb(1073742336,o,o,[]),t.wb(256,S.n,"XSRF-TOKEN",[]),t.wb(256,S.o,"X-XSRF-TOKEN",[]),t.wb(1024,_.k,function(){return[[{path:"",component:h}]]},[])])})}}]);