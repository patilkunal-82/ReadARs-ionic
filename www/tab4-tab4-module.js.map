{"version":3,"sources":["webpack:///./src/app/shared/search.pipe.ts","webpack:///./src/app/shared/sort.pipe.ts","webpack:///./src/app/tab4/tab4.module.ts","webpack:///./src/app/tab4/tab4.page.html","webpack:///./src/app/tab4/tab4.page.scss","webpack:///./src/app/tab4/tab4.page.ts"],"names":[],"mappings":"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","file":"tab4-tab4-module.js","sourcesContent":["import { Pipe, PipeTransform } from '@angular/core';\n\n@Pipe({\n  name: 'search'\n})\nexport class SearchPipe implements PipeTransform {\n\n  transform(items: any[], terms: string): any[] {\n    if(!items) return [];\n    if(!terms) return items;\n    terms = terms.toLowerCase();\n    return items.filter( it => {\n      return it.name.toLowerCase().includes(terms); // only filter country name\n    });\n  }\n\n}\n","import { Pipe, PipeTransform } from '@angular/core';\n\n@Pipe({\n  name: 'sort'\n})\nexport class SortPipe implements PipeTransform {\n\n  transform(array: Array<string>, args?: any): Array<string> {\n    return array.sort(function(a, b){\n      if(a[args.property] < b[args.property]){\n          return -1 * args.order;\n      }\n      else if( a[args.property] > b[args.property]){\n          return 1 * args.order;\n      }\n      else{\n          return 0;\n      }\n    });\n  }\n\n}\n","import { IonicModule } from '@ionic/angular';\nimport { RouterModule } from '@angular/router';\nimport { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { ReactiveFormsModule } from \"@angular/forms\";\nimport { Tab4Page } from './tab4.page';\nimport { SortPipe } from '../shared/sort.pipe';\nimport { SearchPipe } from '../shared/search.pipe';\nimport { IonicImageLoaderModule } from 'ionic-image-loader-v5';\n\n@NgModule({\n  imports: [\n    IonicModule,\n    CommonModule,\n    FormsModule,\n    ReactiveFormsModule,\n    RouterModule.forChild([{ path: '', component: Tab4Page }]),\n    IonicImageLoaderModule\n  ],\n  declarations: [Tab4Page, SearchPipe, SortPipe],\n  exports: [SearchPipe, SortPipe ]\n})\nexport class Tab4PageModule {}\n","module.exports = \"<ion-header color=\\\"success\\\" [translucent]=\\\"true\\\" collapse=\\\"condense\\\">\\n  <ion-toolbar >\\n    <ion-title size=\\\"large\\\" \\n               style=\\\"font:xx-large; font-family:-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\\n               color: #FDFEFE  ; font-weight: bolder; font-size: 25px;\\\">\\n     Search All\\n    </ion-title>\\n  </ion-toolbar>\\n\\n\\n</ion-header> \\n\\n<ion-content>\\n\\n  <ion-searchbar shape=\\\"round\\\" no-margin [(ngModel)]=\\\"searchTerm\\\"\\n      (ionChange)=\\\"setFilteredItems()\\\" placeholder=\\\"Search..\\\">\\n  </ion-searchbar>\\n\\n  <ion-refresher slot=\\\"fixed\\\" (ionRefresh)=\\\"refreshBookList($event)\\\">\\n    <ion-refresher-content pullingText=\\\"pull for update\\\" refreshingText= \\\"...updating\\\">\\n    </ion-refresher-content>\\n  </ion-refresher>\\n\\n  <ion-spinner *ngIf=\\\"showSpinner\\\" class=\\\"spin\\\"></ion-spinner>\\n   <ion-list *ngIf=\\\"!showSpinner\\\">\\n      <ion-virtual-scroll [items]=\\\"books | sort: {property: column, order: order}\\\">\\n        <div *virtualItem=\\\"let book\\\">\\n            <ion-item [routerLink]=\\\"['bookdetail', book._id]\\\"> \\n              <ion-avatar>\\n                <!--<ion-img [src]=\\\"(bookIdImageMap.get(book._id))\\\"></ion-img>-->\\n                <img-loader [src]=\\\"(bookIdImageMap.get(book._id))\\\" useImg (load)=\\\"onImageLoad($event)\\\"></img-loader>\\n              </ion-avatar>\\n               <ion-label class=\\\"book-display\\\">\\n                <span class=\\\"ion-text-wrap\\\"><h3><strong>{{book.bookname}}</strong></h3></span>\\n                <h4 style=\\\"color:darkgrey\\\"> in {{book.booklanguage}}. By - {{book.bookauthor}}.</h4>\\n                <span *ngIf=\\\"book.bookcurrentstatus == 'available' \\\" style=\\\"color: green; font-size: small;\\\">{{book.bookcurrentstatus}}</span>\\n                <span *ngIf=\\\"book.bookcurrentstatus == 'borrowed' \\\" style=\\\"color: red; font-size: small;\\\">{{book.bookcurrentstatus}}</span>\\n                <span *ngIf=\\\"book.bookcurrentstatus == 'reserved' \\\" style=\\\"color: orange; font-size: small;\\\">{{book.bookcurrentstatus}}</span>\\n              </ion-label>\\n            </ion-item>\\n        </div>\\n      </ion-virtual-scroll>\\n    </ion-list>\\n \\n  \\n  \\n    <!--<ion-list *ngIf=\\\"showSkeleton\\\">\\n      <ion-virtual-scroll [items]=\\\"books | sort: {property: column, order: order}\\\">\\n        <div *virtualItem=\\\"let book\\\">\\n            <ion-item> \\n              <ion-avatar>\\n                <ion-skeleton-text animated></ion-skeleton-text>\\n              </ion-avatar>\\n               <ion-label class=\\\"book-display\\\">\\n                <ion-skeleton-text animated></ion-skeleton-text>\\n                <ion-skeleton-text animated></ion-skeleton-text>\\n                <ion-skeleton-text animated></ion-skeleton-text>\\n                <ion-skeleton-text animated></ion-skeleton-text>\\n                <ion-skeleton-text animated></ion-skeleton-text>\\n              </ion-label>\\n            </ion-item>\\n          </div>\\n        </ion-virtual-scroll>\\n    </ion-list>-->\\n\\n  \\n\\n \\n\\n  <!-- <ion-infinite-scroll (ionInfinite)=\\\"loadMoreBooks($event)\\\">\\n    <ion-infinite-scroll-content loadingText=\\\"..loading\\\">\\n    </ion-infinite-scroll-content>\\n  </ion-infinite-scroll>  -->\\n\\n\\n</ion-content>\\n\\n\\n\"","module.exports = \".welcome-card ion-img {\\n  max-height: 35vh;\\n  overflow: hidden; }\\n\\n.display_heading {\\n  margin: 10px auto;\\n  padding: 10px; }\\n\\n.spinner-container {\\n  width: 100%;\\n  text-align: center;\\n  padding: 10px; }\\n\\n.book-display {\\n  margin: 5px;\\n  padding: 2px; }\\n\\n.book-image {\\n  margin: 5px; }\\n\\n.bookimage1 {\\n  width: 70px;\\n  height: 70px;\\n  box-shadow: grey; }\\n\\nion-toolbar {\\n  --background: #145A32; }\\n\\n.my-custom-class {\\n  --background: #222;\\n  --spinner-color: #fff;\\n  color: #fff; }\\n\\nion-avatar {\\n  width: 100% !important;\\n  height: 100% !important;\\n  max-width: 60px !important;\\n  max-height: 60px !important;\\n  margin: auto; }\\n\\n.spin {\\n  position: fixed;\\n  top: 50%;\\n  left: 50%;\\n  -webkit-transform: translate(-50%, -50%);\\n          transform: translate(-50%, -50%); }\\n\\nion-spinner {\\n  width: 28px;\\n  height: 28px;\\n  stroke: #444;\\n  fill: #222; }\\n\\n.bookimage2 {\\n  width: 90px;\\n  height: 100px;\\n  box-shadow: grey; }\\n\\nion-label {\\n  margin-left: 10px; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9rdW5hbHBhdGlsL1BlcnNvbmFsRmFtaWx5L1dvcmtSZWxhdGVkL1Byb2dyYW1taW5nL0lvbmljL1JlYWRBUnNfSW9uaWMvc3JjL2FwcC90YWI0L3RhYjQucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0UsZ0JBQWdCO0VBQ2hCLGdCQUFnQixFQUFBOztBQUdsQjtFQUNFLGlCQUFpQjtFQUNqQixhQUFhLEVBQUE7O0FBR2Y7RUFDRSxXQUFXO0VBQ1gsa0JBQWtCO0VBQ2xCLGFBQWEsRUFBQTs7QUFHZjtFQUlJLFdBQVc7RUFDWCxZQUFZLEVBQUE7O0FBR2hCO0VBSUksV0FBVyxFQUFBOztBQUdmO0VBQ0UsV0FBVztFQUNYLFlBQVk7RUFFWixnQkFBZ0IsRUFBQTs7QUFHbEI7RUFFRSxxQkFBYSxFQUFBOztBQUdmO0VBQ0Usa0JBQWE7RUFDYixxQkFBZ0I7RUFFaEIsV0FBVyxFQUFBOztBQUdiO0VBQ0Usc0JBQXFCO0VBQ3JCLHVCQUF3QjtFQUN4QiwwQkFBMEI7RUFDMUIsMkJBQTJCO0VBQzNCLFlBQVksRUFBQTs7QUFJWjtFQUNFLGVBQWU7RUFDZixRQUFRO0VBQ1IsU0FBUztFQUNULHdDQUFnQztVQUFoQyxnQ0FBZ0MsRUFBQTs7QUFFbEM7RUFDRSxXQUFXO0VBQ1gsWUFBWTtFQUNaLFlBQVk7RUFDWixVQUFVLEVBQUE7O0FBR1o7RUFDRSxXQUFXO0VBQ1gsYUFBYTtFQUViLGdCQUFnQixFQUFBOztBQUdsQjtFQUNFLGlCQUFpQixFQUFBIiwiZmlsZSI6InNyYy9hcHAvdGFiNC90YWI0LnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIi53ZWxjb21lLWNhcmQgaW9uLWltZyB7XG4gIG1heC1oZWlnaHQ6IDM1dmg7XG4gIG92ZXJmbG93OiBoaWRkZW47XG59XG5cbi5kaXNwbGF5X2hlYWRpbmcge1xuICBtYXJnaW46IDEwcHggYXV0bztcbiAgcGFkZGluZzogMTBweDtcbn1cblxuLnNwaW5uZXItY29udGFpbmVyIHtcbiAgd2lkdGg6IDEwMCU7XG4gIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgcGFkZGluZzogMTBweDtcbn1cblxuLmJvb2stZGlzcGxheSB7XG5cbiAgICAvL2hlaWdodDo1MHB4O1xuICAgIC8vYm9yZGVyOiBncmF5IHNvbGlkIDFweDtcbiAgICBtYXJnaW46IDVweDtcbiAgICBwYWRkaW5nOiAycHg7XG59XG5cbi5ib29rLWltYWdlIHtcbiAgICAvL3dpZHRoOiAzMDBweDtcbiAgICAvL2hlaWdodDogMzAwcHg7XG4gICAgLy9ib3JkZXI6IGdyYXkgc29saWQgMXB4O1xuICAgIG1hcmdpbjogNXB4O1xufVxuXG4uYm9va2ltYWdlMSB7XG4gIHdpZHRoOiA3MHB4O1xuICBoZWlnaHQ6IDcwcHg7XG4gIC8vbWFyZ2luLWxlZnQ6IDVweDtcbiAgYm94LXNoYWRvdzogZ3JleTtcbn1cblxuaW9uLXRvb2xiYXIge1xuICAvLy0tYmFja2dyb3VuZDogIzFCNEY3MjtcbiAgLS1iYWNrZ3JvdW5kOiAjMTQ1QTMyO1xufVxuXG4ubXktY3VzdG9tLWNsYXNzIHtcbiAgLS1iYWNrZ3JvdW5kOiAjMjIyO1xuICAtLXNwaW5uZXItY29sb3I6ICNmZmY7XG5cbiAgY29sb3I6ICNmZmY7XG59XG5cbmlvbi1hdmF0YXIgIHsgICAgIFxuICB3aWR0aDoxMDAlICFpbXBvcnRhbnQ7ICBcbiAgaGVpZ2h0IDogMTAwJSAhaW1wb3J0YW50OyAgXG4gIG1heC13aWR0aDogNjBweCAhaW1wb3J0YW50OyAgLy9hbnkgc2l6ZVxuICBtYXgtaGVpZ2h0OiA2MHB4ICFpbXBvcnRhbnQ7IC8vYW55IHNpemUgXG4gIG1hcmdpbjogYXV0bztcbiAgLy9tYXJnaW4tdG9wOiAyMHB4O1xuICB9XG5cbiAgLnNwaW57XG4gICAgcG9zaXRpb246IGZpeGVkO1xuICAgIHRvcDogNTAlO1xuICAgIGxlZnQ6IDUwJTtcbiAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZSgtNTAlLCAtNTAlKTtcbiAgfVxuICBpb24tc3Bpbm5lciB7XG4gICAgd2lkdGg6IDI4cHg7XG4gICAgaGVpZ2h0OiAyOHB4O1xuICAgIHN0cm9rZTogIzQ0NDtcbiAgICBmaWxsOiAjMjIyO1xuICB9XG5cbiAgLmJvb2tpbWFnZTIge1xuICAgIHdpZHRoOiA5MHB4O1xuICAgIGhlaWdodDogMTAwcHg7XG4gICAgLy9tYXJnaW4tbGVmdDogNXB4O1xuICAgIGJveC1zaGFkb3c6IGdyZXk7XG4gIH1cblxuICBpb24tbGFiZWwge1xuICAgIG1hcmdpbi1sZWZ0OiAxMHB4O1xuICB9XG5cblxuXG4iXX0= */\"","import { Component, OnInit, Inject, AfterViewInit, ViewChild } from '@angular/core';\nimport { DomSanitizer, SafeResourceUrl, SafeUrl} from '@angular/platform-browser';\nimport { Observable } from 'rxjs';\nimport { Book } from '../shared/book';\nimport { BookdetailService } from '../services/bookdetail.service';\nimport { AuthService } from '../services/auth.service';\nimport { BooksService } from '../services/books.service';\nimport { ReadarsService } from '../services/readars.service';\nimport { Router } from '@angular/router';\nimport { NavController } from '@ionic/angular';\nimport { SearchedData } from '../services/searchbooks.service';\nimport { debounceTime } from \"rxjs/operators\";\nimport { FormControl } from \"@angular/forms\";\nimport { SortPipe } from '../shared/sort.pipe'\nimport { ImageLoaderService } from 'ionic-image-loader-v5';\nimport { LoadingController } from '@ionic/angular';\n\n@Component({\n  selector: 'app-tab4',\n  templateUrl: 'tab4.page.html',\n  styleUrls: ['tab4.page.scss'],\n\n})\n\nexport class Tab4Page implements OnInit, AfterViewInit {\n\n  books: Book[];\n  bookList: Book[];\n  bookIds: Book[];\n  errMess: string;\n  username: string;\n\n  public bookIdsImages = new Map();\n  public bookIdImageMap = new Map();\n  lbookIds: any[];\n  public url: SafeResourceUrl;\n\n  public items: any;\n  public searchTerm : string = \"\";\n  public searchControl: FormControl;\n\n  descending: boolean = false;\n  order: number;\n  column: string = 'booklanguage';\n  showSkeleton: boolean = true;\n  showSpinner: boolean = true;\n\n  constructor(public navCtrl: NavController, private authService: AuthService, private booksService: BooksService,\n    private readarsService: ReadarsService, private imageLoaderService: ImageLoaderService,\n  @Inject('baseURL') private baseURL, private router: Router, private searchedData: SearchedData, \n   public loadingController: LoadingController){\n    this.searchControl = new FormControl();\n  }\n  ngOnInit() {\n    //this.showForm = false;\n\n      /*this.presentLoading();\n      this.setFilteredItems();\n      this.readarsService.getBooks()\n       .subscribe(books => {\n     this.books = books;\n      console.log(\"BOOK COLLECTION IS ---------->\", this.books)\n    }, errmess => this.errMess = <any>errmess);\n\n      this.prepareBookIdsImagesMap();*/\n\n      setTimeout(() => {\n        //this.showSkeleton = false;\n        this.showSpinner = false;\n      }, 3000);\n  \n  \n      this.readarsService.getBooks()\n      .subscribe(books => {\n        this.books = books;\n        this.prepareBookIdsImagesMap();\n          console.log(\"BOOK COLLECTION IS ---------->\", this.books)\n      }, errmess => this.errMess = <any>errmess);\n      this.setFilteredItems();\n    \n  }\n\n  async presentLoading() {\n    const loading = await this.loadingController.create({\n      cssClass: 'my-custom-class',\n      message: 'Loading...please wait',\n      duration: 2000\n    });\n    await loading.present();\n\n    const { role, data } = await loading.onDidDismiss();\n    console.log('Loading dismissed!');\n  }\n\n  ionViewDidEnter() {\n\n    //this.showForm = false;\n\n    //this.presentLoading();\n\n    /*setTimeout(() => {\n      this.showSkeleton = false;\n    }, 3000);\n\n\n    this.readarsService.getBooks()\n      .subscribe(books => {\n     this.books = books;\n     this.prepareBookIdsImagesMap();\n      console.log(\"BOOK COLLECTION IS ---------->\", this.books)\n    }, errmess => this.errMess = <any>errmess);\n    this.setFilteredItems();*/\n\n    \n   \n  \n  }\n\n  ionViewWillEnter() {\n     // this.prepareBookIdsImagesMap();\n \n  }\n\n  \n\n  clearCache() {\n    this.imageLoaderService.clearCache();\n  \n   // refresher.complete();\n  }\n\n  onImageLoad(event) {\n    console.log(\"image ready\");\n  }\n\n  sort(){\n    this.descending = !this.descending;\n    this.order = this.descending ? 1 : -1;\n  }\n\n  prepareBookIdsImagesMap() {\n\n    // get all the  bookIds\n    // for every  bookID get the corresponding imageURL\n    // store image URL against the bookID in a map\n    // when displaying a view, for every book Id(key), get corresponding img url(value) from the map\n\n    this.readarsService.getBookIds().subscribe(bookIds => {\n      this.bookIds = bookIds;\n      this.storeBookIds(this.bookIds);\n      this.lbookIds = this.loadBookIds();\n      for (let i=0; i < this.lbookIds.length; i++) {\n        this.readarsService.getBookImage(this.lbookIds[i])\n        .subscribe(x => {\n            this.url = x;\n            console.log(\"this.url\", this.url);\n            this.bookIdImageMap.set(this.lbookIds[i], this.url);\n            console.log(\"book image map\", this.bookIdImageMap);\n        }, errMess => console.log(errMess));\n      }\n    }, errmess => this.errMess = <any>errmess);\n  }\n\n  storeBookIds(bookIds: any[]) {\n    console.log('BookIds stored are :', bookIds);\n    localStorage.setItem('bookIds', JSON.stringify(bookIds));\n  }\n\n  loadBookIds() {\n    this.bookIds = JSON.parse(localStorage.getItem('bookIds'));\n    console.log('bookIds ', this.bookIds);\n    if (this.bookIds) {\n      return this.bookIds;\n    }\n    return;\n  }\n\n  ngAfterViewInit() {\n\n  }\n\n  refreshBookList(event) {\n    setTimeout(() => {\n\n      this.readarsService.getBooks()\n      .subscribe(books => {\n        this.books = books;\n      }, errmess => this.errMess = <any>errmess);\n\n      event.target.complete();\n\n    }, 2000);\n  }\n\n  setFilteredItems() {\n\n    this.books = this.searchedData.filterItems(this.searchTerm);\n    console.log(\"Searched data\", this.books)\n\n  }\n\n  loadMoreBooks(event) {\n    setTimeout(() => {\n    /*  this.bookList = this.books;\n      const newBooks = [...this.bookList];\n      this.books = this.bookList.concat(newBooks);*/\n    }, 3000);\n  }\n\n\n}\n"],"sourceRoot":""}