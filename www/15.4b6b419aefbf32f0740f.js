(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{QJAh:function(l,n,o){"use strict";o.r(n);var u=o("CcnG"),e=o("mrSG"),t=o("15JJ"),i=o("5uSc"),r=o("ZZ/e"),s=o("CjQN"),c=o("Z4xi"),b=o("hnS/"),a=o("JhVf"),k=o("F/XL"),h=o("9Z1F"),d=o("mI4i"),p=o("lUK6"),f=o("lGQG"),g=o("t/Na"),v=function(){function l(l,n,o){this.http=l,this.auth=n,this.processHTTPMsgService=o}return l.prototype.getReservedBooks=function(){return this.auth.isLoggedIn()?this.http.get(d.a+"reserved?isReserved=true").pipe(Object(h.a)(this.processHTTPMsgService.handleError)):null},l.prototype.isReserved=function(l){var n=this;return this.auth.isLoggedIn()?this.http.get(d.a+"reserved/"+l).pipe(Object(h.a)(function(l){return n.processHTTPMsgService.handleError(l)})):Object(k.a)({exists:!1,book:null})},l.ngInjectableDef=u.S({factory:function(){return new l(u.W(g.c),u.W(f.a),u.W(p.a))},token:l,providedIn:"root"}),l}(),m=function(){function l(l,n,o,u,e,t,i,r,s,c){this._socialShare=l,this._modalController=n,this.readarsService=e,this.reservedService=t,this.route=i,this.router=r,this.emailComposer=s,this.callNumber=c,this.visibility="shown",this.favorite=!1,this.reserved=!1,this.panelOpenState=!1}return l.prototype.ngOnInit=function(){var l=this;this.readarsService.getBookIds().subscribe(function(n){l.bookIds=n,l.storeBookIds(l.bookIds)},function(n){return l.errMess=n}),this.lbookIds=this.loadBookIds(),console.log("BookIds from getBookIds"+this.bookIds),console.log("BookIds from getBookIds"+this.bookIds),this.route.params.pipe(Object(t.a)(function(n){return l.visibility="hidden",l.readarsService.getBook(n.bookID)})).subscribe(function(n){l.book=n,console.log("Book found for id:"+l.book._id),l.setPrevNext(l.book._id),l.visibility="shown",l.reservedService.isReserved(l.book._id).subscribe(function(n){console.log(n),l.reserved=n.exists},function(l){return console.log(l)})},function(n){return l.errMess=n})},l.prototype.setPrevNext=function(l){console.log("Into setPreNext"),this.lbookIds=this.loadBookIds(),console.log("BookIds array"+this.lbookIds),console.log("BookIds array length"+this.lbookIds.length),console.log("Specifc BookId:"+l);var n=this.lbookIds.indexOf(l);console.log("Specific BookId after try catch"+l),console.log("Array index"+n),this.prev=this.lbookIds[(this.lbookIds.length+n-1)%this.lbookIds.length],this.next=this.lbookIds[(this.lbookIds.length+n+1)%this.lbookIds.length],console.log("Previous",this.prev),console.log("Next",this.next)},l.prototype.goPrev=function(){this.router.navigateByUrl("/bookdetail/"+this.prev)},l.prototype.goNext=function(){this.router.navigateByUrl("/bookdetail/"+this.next)},l.prototype.goBack=function(){this.router.navigateByUrl("/booklist")},l.prototype.onSubmit=function(){},l.prototype.onValueChanged=function(l){},l.prototype.reserveBook=function(){var l=this;console.log("inside reserveBook of BookdetailComponent.ts"),alert("Contact & collect the book from the owner in next 48 hours. Failing which, the book will be made available to others !"),this.book.bookavailable=!1,this.book.bookreserved=!0,this.book.bookborrowed=!1,this.readarsService.reserveBook(this.book._id,this.book).subscribe(function(n){console.log(n),l.reserved=!0})},l.prototype.storeBookIds=function(l){console.log("BookIds stored are :",l),localStorage.setItem("bookIds",JSON.stringify(l))},l.prototype.loadBookIds=function(){if(this.bookIds=JSON.parse(localStorage.getItem("bookIds")),console.log("bookIds ",this.bookIds),this.bookIds)return this.bookIds},l.prototype.emailOwner=function(){this.emailComposer.open({to:this.book.bookowner.email,isHtml:!0})},l.prototype.callOwner=function(){this.callNumber.callNumber(this.book.bookownertelnum,!0).then(function(l){return console.log("Launched dialer!",l)}).catch(function(l){return console.log("Error launching dialer",l)})},l.prototype.share=function(){},l.prototype.openModal=function(){return e.b(this,void 0,void 0,function(){return e.e(this,function(l){return[2]})})},l}(),I=function(){return function(){}}(),w=o("oBZk"),B=function(){function l(l,n){this._modalController=n,this.videoURL=l.get("videoURL")}return l.prototype.ngOnInit=function(){},l.prototype.closeModal=function(){this._modalController.dismiss()},l}(),y=u.nb({encapsulation:0,styles:[[".bookvideo[_ngcontent-%COMP%]{width:100%;height:auto;margin-top:25vh}"]],data:{}});function O(l){return u.Gb(0,[(l()(),u.pb(0,0,null,null,9,"ion-content",[["color","dark"]],null,null,null,w.K,w.j)),u.ob(1,49152,null,0,r.t,[u.h,u.k],{color:[0,"color"]},null),(l()(),u.pb(2,0,null,0,1,"video",[["autoplay",""],["class","bookvideo"]],null,null,null,null,null)),(l()(),u.pb(3,0,null,null,0,"source",[],[[8,"src",4]],null,null,null,null)),(l()(),u.pb(4,0,null,0,5,"ion-fab",[["horizontal","center"],["slot","fixed"],["vertical","bottom"]],null,null,null,w.N,w.k)),u.ob(5,49152,null,0,r.v,[u.h,u.k],{horizontal:[0,"horizontal"],vertical:[1,"vertical"]},null),(l()(),u.pb(6,0,null,0,3,"ion-fab-button",[["color","danger"]],null,[[null,"click"]],function(l,n,o){var u=!0;return"click"===n&&(u=!1!==l.component.closeModal()&&u),u},w.L,w.l)),u.ob(7,49152,null,0,r.w,[u.h,u.k],{color:[0,"color"]},null),(l()(),u.pb(8,0,null,0,1,"ion-icon",[["name","close"]],null,null,null,w.P,w.o)),u.ob(9,49152,null,0,r.B,[u.h,u.k],{name:[0,"name"]},null)],function(l,n){l(n,1,0,"dark"),l(n,5,0,"center","bottom"),l(n,7,0,"danger"),l(n,9,0,"close")},function(l,n){l(n,3,0,n.component.videoURL)})}function S(l){return u.Gb(0,[(l()(),u.pb(0,0,null,null,1,"app-bookvideo",[],null,null,null,O,y)),u.ob(1,114688,null,0,B,[r.Gb,r.Eb],null,null)],function(l,n){l(n,1,0)},null)}var P=u.lb("app-bookvideo",B,S,{},{},[]),x=o("pMnS"),E=o("Ip0R"),j=o("ZYCi"),C=u.nb({encapsulation:0,styles:[[""]],data:{}});function G(l){return u.Gb(0,[(l()(),u.pb(0,0,null,null,4,"ion-card-content",[["style","color: red;"]],null,null,null,w.G,w.g)),u.ob(1,49152,null,0,r.m,[u.h,u.k],null,null),(l()(),u.pb(2,0,null,0,1,"ion-icon",[["src","../assets/icon/lock-closed.svg"]],null,null,null,w.P,w.o)),u.ob(3,49152,null,0,r.B,[u.h,u.k],{src:[0,"src"]},null),(l()(),u.Eb(4,0,[" "," is currently not available ! Please check later.. "]))],function(l,n){l(n,3,0,"../assets/icon/lock-closed.svg")},function(l,n){var o=n.component;l(n,4,0,null==o.book?null:o.book.bookname)})}function L(l){return u.Gb(0,[(l()(),u.pb(0,0,null,null,4,"ion-card-content",[["style","color: green;"]],null,null,null,w.G,w.g)),u.ob(1,49152,null,0,r.m,[u.h,u.k],null,null),(l()(),u.pb(2,0,null,0,1,"ion-icon",[["src","../assets/icon/lock-open.svg"]],null,null,null,w.P,w.o)),u.ob(3,49152,null,0,r.B,[u.h,u.k],{src:[0,"src"]},null),(l()(),u.Eb(4,0,[" "," is available ! "]))],function(l,n){l(n,3,0,"../assets/icon/lock-open.svg")},function(l,n){var o=n.component;l(n,4,0,null==o.book?null:o.book.bookname)})}function N(l){return u.Gb(0,[(l()(),u.pb(0,0,null,null,19,"ion-fab",[["horizontal","end"],["slot","fixed"],["vertical","top"]],null,null,null,w.N,w.k)),u.ob(1,49152,null,0,r.v,[u.h,u.k],{horizontal:[0,"horizontal"],vertical:[1,"vertical"]},null),(l()(),u.pb(2,0,null,0,3,"ion-fab-button",[],null,null,null,w.L,w.l)),u.ob(3,49152,null,0,r.w,[u.h,u.k],null,null),(l()(),u.pb(4,0,null,0,1,"ion-icon",[["name","add"]],null,null,null,w.P,w.o)),u.ob(5,49152,null,0,r.B,[u.h,u.k],{name:[0,"name"]},null),(l()(),u.pb(6,0,null,0,13,"ion-fab-list",[["side","bottom"]],null,null,null,w.M,w.m)),u.ob(7,49152,null,0,r.x,[u.h,u.k],{side:[0,"side"]},null),(l()(),u.pb(8,0,null,0,3,"ion-fab-button",[],null,[[null,"click"]],function(l,n,o){var u=!0;return"click"===n&&(u=!1!==l.component.reserveBook()&&u),u},w.L,w.l)),u.ob(9,49152,null,0,r.w,[u.h,u.k],null,null),(l()(),u.pb(10,0,null,0,1,"ion-icon",[["color","success"],["src","../assets/icon/lock-closed.svg"]],null,null,null,w.P,w.o)),u.ob(11,49152,null,0,r.B,[u.h,u.k],{color:[0,"color"],src:[1,"src"]},null),(l()(),u.pb(12,0,null,0,3,"ion-fab-button",[],null,null,null,w.L,w.l)),u.ob(13,49152,null,0,r.w,[u.h,u.k],null,null),(l()(),u.pb(14,0,null,0,1,"ion-icon",[["color","success"],["src","../assets/icon/call.svg"]],null,[[null,"click"]],function(l,n,o){var u=!0;return"click"===n&&(u=!1!==l.component.callOwner()&&u),u},w.P,w.o)),u.ob(15,49152,null,0,r.B,[u.h,u.k],{color:[0,"color"],src:[1,"src"]},null),(l()(),u.pb(16,0,null,0,3,"ion-fab-button",[],null,null,null,w.L,w.l)),u.ob(17,49152,null,0,r.w,[u.h,u.k],null,null),(l()(),u.pb(18,0,null,0,1,"ion-icon",[["color","success"],["src","../assets/icon/mail.svg"]],null,[[null,"click"]],function(l,n,o){var u=!0;return"click"===n&&(u=!1!==l.component.emailOwner()&&u),u},w.P,w.o)),u.ob(19,49152,null,0,r.B,[u.h,u.k],{color:[0,"color"],src:[1,"src"]},null)],function(l,n){l(n,1,0,"end","top"),l(n,5,0,"add"),l(n,7,0,"bottom"),l(n,11,0,"success","../assets/icon/lock-closed.svg"),l(n,15,0,"success","../assets/icon/call.svg"),l(n,19,0,"success","../assets/icon/mail.svg")},null)}function M(l){return u.Gb(0,[(l()(),u.pb(0,0,null,null,10,"ion-header",[],null,null,null,w.O,w.n)),u.ob(1,49152,null,0,r.A,[u.h,u.k],null,null),(l()(),u.pb(2,0,null,0,8,"ion-toolbar",[],null,null,null,w.bb,w.A)),u.ob(3,49152,null,0,r.Ab,[u.h,u.k],null,null),(l()(),u.pb(4,0,null,0,4,"ion-buttons",[["slot","start"]],null,null,null,w.F,w.e)),u.ob(5,49152,null,0,r.k,[u.h,u.k],null,null),(l()(),u.pb(6,0,null,0,2,"ion-back-button",[],null,[[null,"click"]],function(l,n,o){var e=!0;return"click"===n&&(e=!1!==u.yb(l,8).onClick(o)&&e),e},w.D,w.c)),u.ob(7,49152,null,0,r.f,[u.h,u.k],null,null),u.ob(8,16384,null,0,r.g,[[2,r.gb],r.Fb],null,null),(l()(),u.pb(9,0,null,0,1,"ion-title",[],null,null,null,w.ab,w.z)),u.ob(10,49152,null,0,r.yb,[u.h,u.k],null,null),(l()(),u.pb(11,0,null,null,32,"ion-content",[],null,null,null,w.K,w.j)),u.ob(12,49152,null,0,r.t,[u.h,u.k],null,null),(l()(),u.pb(13,0,null,0,30,"ion-card",[],null,null,null,w.J,w.f)),u.ob(14,49152,null,0,r.l,[u.h,u.k],null,null),(l()(),u.pb(15,0,null,0,6,"ion-card-header",[],null,null,null,w.H,w.h)),u.ob(16,49152,null,0,r.n,[u.h,u.k],null,null),(l()(),u.pb(17,0,null,0,1,"ion-icon",[["size","large"],["src","../assets/icon/book.svg"]],null,null,null,w.P,w.o)),u.ob(18,49152,null,0,r.B,[u.h,u.k],{size:[0,"size"],src:[1,"src"]},null),(l()(),u.pb(19,0,null,0,2,"ion-card-title",[],null,null,null,w.I,w.i)),u.ob(20,49152,null,0,r.p,[u.h,u.k],null,null),(l()(),u.Eb(21,0,[" "," "])),(l()(),u.pb(22,0,null,0,13,"ion-card-content",[],null,null,null,w.G,w.g)),u.ob(23,49152,null,0,r.m,[u.h,u.k],null,null),(l()(),u.pb(24,0,null,0,1,"p",[],null,null,null,null,null)),(l()(),u.Eb(25,null,[" Book Description: "," "])),(l()(),u.pb(26,0,null,0,1,"p",[],null,null,null,null,null)),(l()(),u.Eb(27,null,[" Book Owner: "," "," "])),(l()(),u.pb(28,0,null,0,1,"p",[],null,null,null,null,null)),(l()(),u.Eb(29,null,[" Book Owner's rating: "," "])),(l()(),u.pb(30,0,null,0,1,"p",[],null,null,null,null,null)),(l()(),u.Eb(31,null,[" Book Owner's address: "," "])),(l()(),u.pb(32,0,null,0,1,"p",[],null,null,null,null,null)),(l()(),u.Eb(33,null,[" Book Owner Email: "," "])),(l()(),u.pb(34,0,null,0,1,"p",[],null,null,null,null,null)),(l()(),u.Eb(35,null,[" Book Owner Telephone: "," "])),(l()(),u.pb(36,0,null,0,5,"ion-card",[["no-margin",""]],null,null,null,w.J,w.f)),u.ob(37,49152,null,0,r.l,[u.h,u.k],null,null),(l()(),u.gb(16777216,null,0,1,null,G)),u.ob(39,16384,null,0,E.j,[u.O,u.L],{ngIf:[0,"ngIf"]},null),(l()(),u.gb(16777216,null,0,1,null,L)),u.ob(41,16384,null,0,E.j,[u.O,u.L],{ngIf:[0,"ngIf"]},null),(l()(),u.gb(16777216,null,0,1,null,N)),u.ob(43,16384,null,0,E.j,[u.O,u.L],{ngIf:[0,"ngIf"]},null)],function(l,n){var o=n.component;l(n,18,0,"large","../assets/icon/book.svg"),l(n,39,0,o.reserved),l(n,41,0,!o.reserved),l(n,43,0,!o.reserved)},function(l,n){var o=n.component;l(n,21,0,null==o.book?null:o.book.bookname),l(n,25,0,null==o.book?null:o.book.bookdescription),l(n,27,0,null==o.book?null:o.book.bookowner.firstname,null==o.book?null:o.book.bookowner.lastname),l(n,29,0,null==o.book?null:o.book.bookrating),l(n,31,0,null==o.book?null:o.book.bookowneraddress),l(n,33,0,null==o.book?null:o.book.bookowner.email),l(n,35,0,null==o.book?null:o.book.bookownertelnum)})}function z(l){return u.Gb(0,[(l()(),u.pb(0,0,null,null,1,"app-bookdetail",[],null,null,null,M,C)),u.ob(1,114688,null,0,m,[s.a,r.Eb,i.a,j.a,a.a,v,j.a,j.m,c.a,b.a],null,null)],function(l,n){l(n,1,0)},null)}var J=u.lb("app-bookdetail",m,z,{},{},[]),_=o("gIcY"),R=function(){return function(){}}();o.d(n,"BookdetailPageModuleNgFactory",function(){return T});var T=u.mb(I,[],function(l){return u.vb([u.wb(512,u.j,u.bb,[[8,[P,x.a,J]],[3,u.j],u.x]),u.wb(4608,E.l,E.k,[u.u,[2,E.r]]),u.wb(4608,_.p,_.p,[]),u.wb(4608,r.b,r.b,[u.z,u.g]),u.wb(4608,r.Eb,r.Eb,[r.b,u.j,u.q,E.d]),u.wb(4608,r.Ib,r.Ib,[r.b,u.j,u.q,E.d]),u.wb(1073742336,E.c,E.c,[]),u.wb(1073742336,_.n,_.n,[]),u.wb(1073742336,_.g,_.g,[]),u.wb(1073742336,r.Cb,r.Cb,[]),u.wb(1073742336,R,R,[]),u.wb(1073742336,j.o,j.o,[[2,j.u],[2,j.m]]),u.wb(1073742336,I,I,[]),u.wb(1024,j.k,function(){return[[{path:"",component:m}]]},[])])})}}]);